{"version":3,"file":"main-102ff935.357e69d05edf135d93ac.min.js","mappings":"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","sources":["webpack://fabric/./src/graph/path.ts","webpack://fabric/./src/tools/index.ts","webpack://fabric/./src/fabric/index.ts","webpack://fabric/./src/fabric/history.ts","webpack://fabric/./src/graph/coordinate.ts","webpack://fabric/./src/fabric/svg.ts","webpack://fabric/./src/fabric/canvas.ts","webpack://fabric/./src/tools/pen.ts","webpack://fabric/./src/scroll/index.ts","webpack://fabric/./src/tools/color.ts","webpack://fabric/./src/index.ts","webpack://fabric/./src/tools/eraser.ts","webpack://fabric/./src/tools/mover.ts"],"sourcesContent":["export function segmentsToPath(segments, scale) {\n  if (segments.length < 1) {\n    return '';\n  }\n  var pathCommand = `M${segments[0].x * scale},${segments[0].y * scale}`;\n  for (var i = 1; i < segments.length - 1; i++) {\n    var c = segments[i];\n    var n = segments[i + 1] || c;\n\n    pathCommand += `Q${c.x * scale},${c.y * scale},${(c.x * scale + n.x * scale) / 2},${(c.y * scale + n.y * scale) / 2}`;\n  }\n  return pathCommand;\n}\n\nexport function distanceToSegment(point, start, end) {\n  var dx = end.x - start.x;\n  var dy = end.y - start.y;\n  var d = dx * dx + dy * dy;\n  var t = ((point.x - start.x) * dx + (point.y - start.y) * dy) / d;\n\n  if (t < 0) {\n    dx = point.x - start.x;\n    dy = point.y - start.y;\n  } else if (t > 1) {\n    dx = point.x - end.x;\n    dy = point.y - end.y;\n  } else {\n    var closestPoint = { x: start.x + t * dx, y: start.y + t * dy };\n    dx = point.x - closestPoint.x;\n    dy = point.y - closestPoint.y;\n  }\n\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function simplifyPath(points, tolerance) {\n  if (points.length < 3) {\n    return points;\n  }\n\n  var dmax = 0;\n  var index = 0;\n\n  // Find the point with the maximum distance\n  for (var i = 1; i < points.length - 1; i++) {\n    var d = distanceToSegment(points[i], points[0], points[points.length - 1]);\n    if (d > dmax) {\n      index = i;\n      dmax = d;\n    }\n  }\n\n  // If max distance is greater than tolerance, split the curve\n  if (dmax > tolerance) {\n    var leftPoints = points.slice(0, index + 1);\n    var rightPoints = points.slice(index);\n    var simplifiedLeft = simplifyPath(leftPoints, tolerance);\n    var simplifiedRight = simplifyPath(rightPoints, tolerance);\n    return simplifiedLeft.slice(0, simplifiedLeft.length - 1).concat(simplifiedRight);\n  } else {\n    return [points[0], points[points.length - 1]];\n  }\n}\n\nexport function pathCommandToCoordinates(str, precision) {\n  var points = [];\n  var regex = /((m|M)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(l|L)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(h|H)\\s{0,1}([0-9\\.\\-]*)|(v|V)\\s{0,1}([0-9\\.\\-]*)|(c|C)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(s|S)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(q|Q)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(t|T)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(Z|z))/gm;\n  var m = regex.exec(str)\n  while ((m = regex.exec(str)) !== null) {\n    // This is necessary to avoid infinite loops with zero-width matches\n    if (m.index === regex.lastIndex) {\n      regex.lastIndex++;\n    }\n    // The result can be accessed through the `m`-variable.\n    m.forEach((match, groupIndex) => {\n      if (match === 'M') {\n        var x = parseFloat(m[groupIndex + 1]);\n        var y = parseFloat(m[groupIndex + 3]);\n        points.push({ x, y });\n      }\n      if (match === 'L') {\n        var x = parseFloat(m[groupIndex + 1]);\n        var y = parseFloat(m[groupIndex + 3]);\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pX + (x - pX) * (h / (distance / precision));\n            var b = pY + (y - pY) * (h / (distance / precision));\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'H') {\n        var x = m[groupIndex + 1];\n        var y = 0;\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.abs(x - pX);\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pX + (x - pX) * (h / (distance / precision));\n            points.push({ x: a, y: pY });\n          }\n        }\n      }\n      if (match === 'V') {\n        var x = 0;\n        var y = m[groupIndex + 1];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.abs(y - pY);\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pY + (y - pY) * (h / (distance / precision));\n            points.push({ x: pX, y: a });\n          }\n        }\n      }\n      if (match === 'C') {\n        var x1 = m[groupIndex + 1];\n        var y1 = m[groupIndex + 3];\n        var x2 = m[groupIndex + 4];\n        var y2 = m[groupIndex + 6];\n        var x = m[groupIndex + 7];\n        var y = m[groupIndex + 9];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 3) * pX + 3 * Math.pow(1 - t, 2) * t * x1 + 3 * (1 - t) * Math.pow(t, 2) * x2 + Math.pow(t, 3) * x;\n            var b = Math.pow(1 - t, 3) * pY + 3 * Math.pow(1 - t, 2) * t * y1 + 3 * (1 - t) * Math.pow(t, 2) * y2 + Math.pow(t, 3) * y;\n\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'S') {\n        var x2 = m[groupIndex + 1];\n        var y2 = m[groupIndex + 3];\n        var x = m[groupIndex + 4];\n        var y = m[groupIndex + 6];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 3) * pX + 3 * Math.pow(1 - t, 2) * t * (2 * pX - x2) + 3 * (1 - t) * Math.pow(t, 2) * x2 + Math.pow(t, 3) * x;\n            var b = Math.pow(1 - t, 3) * pY + 3 * Math.pow(1 - t, 2) * t * (2 * pY - y2) + 3 * (1 - t) * Math.pow(t, 2) * y2 + Math.pow(t, 3) * y;\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'Q') {\n        var x1 = parseFloat(m[groupIndex + 1]);\n        var y1 = parseFloat(m[groupIndex + 3]);\n        var x = parseFloat(m[groupIndex + 4]);\n        var y = parseFloat(m[groupIndex + 6]);\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 2) * pX + 2 * (1 - t) * t * x1 + Math.pow(t, 2) * x;\n            var b = Math.pow(1 - t, 2) * pY + 2 * (1 - t) * t * y1 + Math.pow(t, 2) * y;\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'T') {\n        var x = m[groupIndex + 1];\n        var y = m[groupIndex + 3];\n      }\n      if (!(match === undefined)) {\n        // console.log(`Found match, group ${groupIndex}: ${match}`);\n      }\n    });\n  }\n  return points;\n}\n","import { fabric_color_list, FabricColor } from './color.ts';\n\nexport var mode: number = 0;\n\nexport var mover: boolean = false;\nexport var move_start_x: number = 0;\nexport var move_start_y: number = 0;\nexport var move_end_x: number = 0;\nexport var move_end_y: number = 0;\nexport var move_offset_x: number = 0;\nexport var move_offset_y: number = 0;\nexport var offsetX: number = 0;\nexport var offsetY: number = 0;\n\nexport var touchData: Array = [];\nexport var touchData_a: Array = [];\nexport var touchData_b: Array = [];\nexport var start_timestamp: number = 0;\nexport var touch_point_identifier: number = 0;\n\nexport var pen_width_base: number = 4;\nexport var force_weight: number = 0;\nexport var speed_weight: number = -0.7;\nexport var pen_color: string = '#000000';\nexport var pen_color_id: string = 'fc-default-black-white';\nexport var tole: number = Math.min(Math.log(pen_width_base) / Math.log(Math.pow(10, 0.88)), 0.7);\n\nexport var currentPath: object = { a: '', b: '', c: '' };\nexport var eraser_selected_element: object = {};\nexport var eraser_hidden_element: object = {};\nexport var eraser_d = 15;\nexport let eraser_color = '#888888';\n\nexport function setToolMode(m) {\n  mode = m;\n  function getSelector(m) {\n    return document.querySelector(`.tools_container button[m=\"${m}\"] span`);\n  }\n  for (var i = 0; i < 3; i++) {\n    getSelector(i).classList.remove('filled');\n  }\n  getSelector(m).classList.add('filled');\n}\n","import { segmentsToPath, simplifyPath, pathCommandToCoordinates } from '../graph/path.ts';\nimport { touchData, touchData_a, touchData_b, pen_color, tole } from '../tools/index.ts';\nimport { currentPath } from '../tools/index.ts';\nvar localforage = require('localforage');\n\nexport let canvas = document.querySelector('#fabric');\nexport let ctx = canvas.getContext('2d');\nexport let svg_canvas = document.querySelector('#vector_fabric');\nexport let svg_canvas_pen_layer = document.querySelector('#vector_fabric g#pen');\nexport var scale = Math.log(window.devicePixelRatio) / Math.log(Math.pow(2, 0.4));\nexport var width = window.innerWidth;\nexport var height = window.innerHeight;\nexport var registration: object = {};\n\nexport function resizeFabric() {\n  width = window.innerWidth;\n  height = window.innerHeight;\n  canvas.width = width * scale;\n  canvas.height = height * scale;\n  svg_canvas.setAttributeNS(null, 'width', width + 'px');\n  svg_canvas.setAttributeNS(null, 'height', height + 'px');\n  svg_canvas.setAttributeNS(null, 'viewbox', `0,0,${width},${height}`);\n  canvas.style.background = 'none';\n}\n\nexport function updatePenPath() {\n  currentPath.c = segmentsToPath(touchData, 1);\n  currentPath.a = segmentsToPath(simplifyPath(touchData_a, tole).concat(touchData_a[touchData_a.length - 1]), 1);\n  currentPath.b = segmentsToPath(simplifyPath(touchData_b, tole).concat(touchData_b[touchData_b.length - 1]), 1);\n}\n\nexport function registerElement(coordinates, id) {\n  var x = coordinates.map((e) => e.x);\n  var y = coordinates.map((e) => e.y);\n  registration[id] = {\n    x1: Math.min(...x),\n    y1: Math.min(...y),\n    x2: Math.max(...x),\n    y2: Math.max(...y),\n    points: coordinates,\n    id: id,\n    hidden: false\n  };\n}\n\nexport function saveContent() {\n  localforage\n    .setItem('fabric', String(document.querySelector('svg#vector_fabric g#pen').innerHTML))\n    .then(function () {})\n    .catch(function (err) {\n      // we got an error\n    });\n}\n\nexport function loadContent() {\n  localforage\n    .getItem('fabric')\n    .then(function (value) {\n      document.querySelector('svg#vector_fabric g#pen').innerHTML = value;\n      var elements = document.querySelectorAll('svg#vector_fabric g#pen g');\n      var elements_length = elements.length;\n      for (var i = 0; i < elements_length; i++) {\n        var e = elements[i];\n        var coordinates = [];\n        for (var child of e.children) {\n          if (child.tagName.toLowerCase() === 'path') {\n            coordinates = coordinates.concat(pathCommandToCoordinates(child.getAttribute('d'), 2));\n          }\n          if (child.tagName.toLowerCase() === 'circle') {\n            coordinates = coordinates.concat([{ x: child.getAttribute('cx'), y: child.getAttribute('cy') }]);\n          }\n        }\n        registerElement(coordinates, e.getAttribute('id'));\n      }\n    })\n    .catch(function (err) {\n      // we got an error\n    });\n}\n","import { saveContent, registration } from './index.ts';\n\nexport var change_history: { addition: any[]; deletion: any[] }[] = [];\nexport var history_offset: number = 0;\n\nexport function log_changes(addition, deletion) {\n  if (!(addition.length === 0 && deletion.length === 0)) {\n    change_history.push({\n      addition: addition,\n      deletion: deletion\n    });\n    history_offset = 0;\n  }\n}\n\nexport function replayHistory(m) {\n  if (m === 'redo') {\n    history_offset += 1;\n  }\n  var index = change_history.length - 1 + history_offset;\n  if (index > change_history.length - 1 || index < 0) {\n    if (m === 'redo') {\n      history_offset -= 1;\n    }\n    return '';\n  }\n  var prev = change_history[index] || { addition: [], deletion: [] };\n  var prev_addition = prev.addition;\n  var prev_deletion = prev.deletion;\n  var prev_addition_len = prev_addition.length;\n  var prev_deletion_len = prev_deletion.length;\n  var hidden_element_identifier = [];\n  var displayed_element_identifier = [];\n  for (var i = 0; i < prev_addition_len; i++) {\n    var k = prev_addition[i];\n    var target = document.querySelector('svg#vector_fabric g#' + k);\n    document.querySelector('svg#vector_fabric g#hidden_pen').appendChild(target);\n    target.removeAttributeNS(null, 'opacity');\n    hidden_element_identifier.push(k);\n    registration[k].hidden = true;\n  }\n  for (var i = 0; i < prev_deletion_len; i++) {\n    var k = prev_deletion[i];\n    var target = document.querySelector('svg#vector_fabric g#' + k);\n    document.querySelector('svg#vector_fabric g#pen').appendChild(target);\n\n    displayed_element_identifier.push(k);\n    registration[k].hidden = false;\n  }\n  change_history.splice(index, 1, { addition: displayed_element_identifier, deletion: hidden_element_identifier });\n  if (m === 'undo') {\n    history_offset -= 1;\n  }\n  saveContent();\n}\n","export function getCoordinateOnCircleBorder(centerX, centerY, radius, radian) {\n  var xe = 1;\n  var ye = 1;\n  var x = parseFloat((centerX + Math.cos(radian) * radius).toFixed(10));\n  var y = parseFloat((centerY + Math.sin(radian) * radius).toFixed(10));\n  var degree = radian * (180 / Math.PI);\n  return { x, y, radian, degree, radius };\n}\n","var { v4: uuidv4 } = require('uuid');\nimport { svg_canvas_pen_layer } from './index.ts';\nimport { pen_width_base } from '../tools/index.ts';\n\nexport function newGroupOnSVG() {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  var id = 'g-' + uuidv4();\n  p.setAttributeNS(null, 'id', id);\n  //p.setAttributeNS(null, 'opacity', '0.5');\n  svg_canvas_pen_layer.appendChild(p);\n  return id;\n}\n\nexport function drawPathOnSVG(pathData, color, container) {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  p.setAttributeNS(null, 'd', pathData);\n  p.setAttributeNS(null, 'stroke-width', pen_width_base);\n  p.setAttributeNS(null, 'stroke', color);\n  p.setAttributeNS(null, 'fill', 'none');\n  p.setAttributeNS(null, 'stroke-linecap', 'round');\n  p.setAttributeNS(null, 'fill-rule', 'nonzero');\n  p.setAttributeNS(null, 'id', uuidv4());\n  container = document.querySelector('#' + container) || svg_canvas_pen_layer;\n  container.appendChild(p);\n}\n\nexport function drawCircleOnSVG(x, y, r, color, container) {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n  p.setAttributeNS(null, 'cx', x);\n  p.setAttributeNS(null, 'cy', y);\n  p.setAttributeNS(null, 'r', r);\n  p.setAttributeNS(null, 'stroke', 'none');\n  p.setAttributeNS(null, 'fill', color);\n  p.setAttributeNS(null, 'stroke-linecap', 'round');\n  p.setAttributeNS(null, 'fill-rule', 'nonzero');\n  p.setAttributeNS(null, 'id', uuidv4());\n  container = document.querySelector('#' + container) || svg_canvas_pen_layer;\n  container.appendChild(p);\n}\n","import { scale } from './index.ts';\nimport { pen_width_base } from '../tools/index.ts';\n\nexport function drawPath(ctx, pathData, color) {\n  var path = new Path2D(pathData);\n  ctx.lineCap = 'round';\n  ctx.lineWidth = pen_width_base * scale;\n  ctx.strokeStyle = color; // Red color\n  ctx.stroke(path); // Use fill() for filling the path instead of stroke()\n  ctx.closePath();\n}\n","import { getCoordinateOnCircleBorder } from '../graph/coordinate.ts';\nimport { segmentsToPath, simplifyPath, pathCommandToCoordinates } from '../graph/path.ts';\nimport { newGroupOnSVG, drawPathOnSVG, drawCircleOnSVG } from '../fabric/svg.ts';\nimport { log_changes } from '../fabric/history.ts';\nimport { registerElement, updatePenPath, canvas, ctx, scale } from '../fabric/index.ts';\nimport { mode, mover, move_start_x, move_start_y, move_end_x, move_end_y, move_offset_x, move_offset_y, offsetX, offsetY, touchData, touchData_a, touchData_b, start_timestamp, touch_point_identifier, pen_width_base, force_weight, speed_weight, pen_color, tole, currentPath, eraser_selected_element, eraser_hidden_element, eraser_d, eraser_color, setToolMode } from './index.ts';\nimport { drawPath } from '../fabric/canvas.ts';\n\nexport function handleTouchStart_pen(event) {\n  var touch = event.touches[0];\n  touchData = []; // Clear previous touch data\n  touchData_a = [];\n  touchData_b = [];\n  touch_point_identifier = touch.identifier;\n\n  if (touch.force) {\n    force_weight = 0.5;\n    speed_weight = -0.2;\n  } else {\n    force_weight = 0.1;\n    speed_weight = 0.2;\n  }\n  //ctx.clearRect(0, 0, window.innerWidth * scale, window.innerHeight * scale);\n\n  touchData.push({\n    x: touch.clientX - offsetX,\n    y: touch.clientY - offsetY,\n    force: touch.force || 0, // Get force (if available, otherwise default to 0)\n    time_stamp: new Date().getTime(),\n    angle: 0\n    // Get timestamp\n  });\n\n  touchData_a.push({\n    x: touch.clientX - offsetX,\n    y: touch.clientY - offsetY\n  });\n  touchData_b.push({\n    x: touch.clientX - offsetX,\n    y: touch.clientY - offsetY\n  });\n  var current = touchData[touchData.length - 1];\n  ctx.beginPath();\n\n  // Draw a circle\n  ctx.arc(current.x * scale, current.y * scale, pen_width_base * 0.5 * scale, 0, 2 * Math.PI);\n  ctx.fillStyle = pen_color;\n  // Fill the circle with color\n  ctx.fill();\n  // Finish drawing\n  ctx.closePath();\n}\n\n//export function to handle touch move event\nexport function handleTouchMove_pen(event) {\n  var touches = [];\n  for (var t in event.touches) {\n    if (event.touches.hasOwnProperty(t) && typeof event.touches[t] === 'object') {\n      touches.push(event.touches[t]);\n    }\n  }\n\n  var touch = touches.filter((p) => p.identifier === touch_point_identifier)[0];\n  if (touch) {\n    var current = touchData[touchData.length - 1] || {\n      x: touch.clientX - offsetX,\n      y: touch.clientY - offsetY,\n      force: touch.force || 0, // Get force (if available, otherwise default to 0)\n      time_stamp: new Date().getTime(),\n      angle: 0\n    };\n    var prev = touchData[touchData.length - 2] || current;\n    var x1 = prev.x;\n    var y1 = prev.y;\n    var x2 = current.x;\n    var y2 = current.y;\n    var angleRadians;\n    if (x2 - x1 === 0) {\n      // Handle vertical line (x-coordinates are the same)\n      if (y2 > y1) {\n        angleRadians = Math.PI / 2; // 90 degrees or /2 radians\n      } else if (y2 < y1) {\n        angleRadians = -Math.PI / 2;\n        //angleRadians = Math.PI*(3/2);\n        // -90 degrees or -/2 radians\n      } else {\n        angleRadians = 0; // Points are the same (angle is 0 radians)\n      }\n    } else {\n      // Non-vertical line\n      angleRadians = Math.atan2(y2 - y1, x2 - x1);\n    }\n\n    touchData.push({\n      x: touch.clientX - offsetX,\n      y: touch.clientY - offsetY,\n      force: touch.force || 0, // Get force (if available, otherwise default to 0)\n      time_stamp: new Date().getTime(),\n      angle: angleRadians\n    });\n\n    var speed = Math.sqrt(Math.pow(current.x - prev.x, 2) + Math.pow(current.y - prev.y, 2)) / (current.time_stamp - prev.time_stamp);\n    var radius = Math.min(Math.max(pen_width_base * Math.pow(current.force, 0.4) * (force_weight / (force_weight + speed_weight)) * 0.5 + pen_width_base * Math.max(0.3, Math.log(speed) / Math.log(1.8)) * (speed_weight / (force_weight + speed_weight)) * 0.5, 0), pen_width_base * 0.7) || 0;\n    var c1 = getCoordinateOnCircleBorder(touch.clientX - offsetX, touch.clientY - offsetY, radius, angleRadians - Math.PI / 2);\n    var c2 = getCoordinateOnCircleBorder(touch.clientX - offsetX, touch.clientY - offsetY, radius, angleRadians + Math.PI / 2);\n\n    touchData_a.push({\n      x: c1.x,\n      y: c1.y\n    });\n    touchData_b.push({\n      x: c2.x,\n      y: c2.y\n    });\n    if (touchData.length >= 2) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      drawPath(ctx, segmentsToPath(touchData, scale), pen_color);\n      drawPath(ctx, segmentsToPath(simplifyPath(touchData_a, tole), scale), pen_color);\n      drawPath(ctx, segmentsToPath(simplifyPath(touchData_b, tole), scale), pen_color);\n    }\n    updatePenPath();\n  }\n}\n\nexport function handleTouchEnd_pen(event) {\n  var touches = [];\n  for (var t in event.changedTouches) {\n    if (event.changedTouches.hasOwnProperty(t) && typeof event.changedTouches[t] === 'object') {\n      touches.push(event.changedTouches[t]);\n    }\n  }\n\n  var touch = touches.filter((p) => p.identifier === touch_point_identifier)[0];\n  if (touch) {\n    if (touchData.length >= 2) {\n      var prev = touchData[touchData.length - 1];\n      touchData.push({\n        x: touch.clientX - offsetX,\n        y: touch.clientY - offsetY,\n        force: touch.force || 0, // Get force (if available, otherwise default to 0)\n        time_stamp: new Date().getTime(),\n        angle: touchData[touchData.length - 1].angle\n      });\n\n      touchData_a.push({\n        x: touch.clientX - offsetX,\n        y: touch.clientY - offsetY\n      });\n      touchData_b.push({\n        x: touch.clientX - offsetX,\n        y: touch.clientY - offsetY\n      });\n\n      touchData = touchData.map((g) => Object.assign(g, { x: g.x - move_offset_x, y: g.y - move_offset_y }));\n      touchData_a = touchData_a.map((g) => Object.assign(g, { x: g.x - move_offset_x, y: g.y - move_offset_y }));\n      touchData_b = touchData_b.map((g) => Object.assign(g, { x: g.x - move_offset_x, y: g.y - move_offset_y }));\n\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      drawPath(ctx, segmentsToPath(touchData, scale), pen_color);\n      drawPath(ctx, segmentsToPath(simplifyPath(touchData_a, tole), scale), pen_color);\n      drawPath(ctx, segmentsToPath(simplifyPath(touchData_b, tole), scale), pen_color);\n\n      updatePenPath();\n      var group = newGroupOnSVG();\n\n      drawPathOnSVG(currentPath.a, pen_color, group);\n      drawPathOnSVG(currentPath.b, pen_color, group);\n      drawPathOnSVG(currentPath.c, pen_color, group);\n\n      var ca = pathCommandToCoordinates(currentPath.a, 3);\n      var cb = pathCommandToCoordinates(currentPath.b, 3);\n      var cc = pathCommandToCoordinates(currentPath.c, 3);\n\n      registerElement(ca.concat(cb).concat(cc), group);\n      log_changes([group], []);\n    } else {\n      var point = touchData[touchData.length - 1];\n      var group = newGroupOnSVG();\n      drawCircleOnSVG(point.x, point.y, pen_width_base * 0.5, pen_color, group);\n      registerElement([point], group);\n      log_changes([group], []);\n    }\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  }\n}\n","export let keys = { 37: 1, 38: 1, 39: 1, 40: 1 };\nexport var supportsPassive = false;\nexport var wheelOpt = supportsPassive ? { passive: false } : false;\nexport var wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel';\n\nexport function preventDefault(e) {\n  e.preventDefault();\n}\n\nexport function preventDefaultForScrollKeys(e) {\n  if (keys[e.keyCode]) {\n    preventDefault(e);\n    return false;\n  }\n}\n\nexport function checkPassive() {\n  try {\n    window.addEventListener(\n      'test',\n      null,\n      Object.defineProperty({}, 'passive', {\n        get: function () {\n          supportsPassive = true;\n        }\n      })\n    );\n  } catch (e) {}\n  wheelOpt = supportsPassive ? { passive: false } : false;\n}\n\nexport function disableScroll() {\n  window.addEventListener('DOMMouseScroll', preventDefault, false); // older FF\n  window.addEventListener(wheelEvent, preventDefault, wheelOpt); // modern desktop\n  window.addEventListener('touchmove', preventDefault, wheelOpt); // mobile\n  window.addEventListener('keydown', preventDefaultForScrollKeys, false);\n}\n\nexport function enableScroll() {\n  window.removeEventListener('DOMMouseScroll', preventDefault, false);\n  window.removeEventListener(wheelEvent, preventDefault, wheelOpt);\n  window.removeEventListener('touchmove', preventDefault, wheelOpt);\n  window.removeEventListener('keydown', preventDefaultForScrollKeys, false);\n}\n","import { pen_color, pen_color_id } from './index.ts';\n\nvar { v4: uuidv4 } = require('uuid');\nexport var fabric_color_list = {};\nvar localforage = require('localforage');\n\nexport class FabricColor {\n  constructor(r, g, b) {\n    if (typeof r === 'number' && typeof g === 'number' && typeof b === 'number') {\n      r = Math.max(Math.min(255, Math.floor(r)), 0);\n      g = Math.max(Math.min(255, Math.floor(g)), 0);\n      b = Math.max(Math.min(255, Math.floor(b)), 0);\n      this.light = { type: 'rgb', r: r, g: g, b: b };\n      this.dark = { type: 'rgb', r: r, g: g, b: b };\n      this.id = uuidv4();\n      this.time = new Date().getTime();\n      this.type = 'FabricColor';\n    }\n  }\n  toHEX() {\n    function componentToHex(c) {\n      var hex = c.toString(16);\n      return String(hex.length == 1 ? '0' + hex : hex).toUpperCase();\n    }\n    function rgbToHex(r, g, b) {\n      return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n    }\n    var color_scheme = 'light';\n    var mf = function () {\n      return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    };\n    color_scheme = mf();\n    return {\n      type: 'hex',\n      light: { type: 'hex', hex: rgbToHex(this.light.r, this.light.g, this.light.b) },\n      dark: { type: 'hex', hex: rgbToHex(this.dark.r, this.dark.g, this.dark.b) },\n      current: { type: 'hex', hex: rgbToHex(this[color_scheme].r, this[color_scheme].g, this[color_scheme].b) },\n      color_scheme: mf,\n      id: this.id\n    };\n  }\n  toCSS() {\n    var hex = this.toHEX();\n    return {\n      type: 'css',\n      light: { declaration: `--fc-${this.id}: ${hex.light.hex};` },\n      dark: { declaration: `--fc-${this.id}: ${hex.dark.hex};` },\n      application: `var(--fc-${this.id})`,\n      id: this.id\n    };\n  }\n  save(lf) {\n    var key = `fc-${this.id}`;\n    var obj = {\n      type: this.type,\n      id: this.id,\n      light: this.light,\n      dark: this.dark,\n      time: this.time\n    };\n    if (lf) {\n      localforage.setItem(key, JSON.stringify(obj));\n    }\n    obj.obj = this;\n    obj.toHEX = this.toHEX();\n    obj.toCSS = this.toCSS();\n    fabric_color_list[key] = obj;\n  }\n  setColor(r1, g1, b1, r2, g2, b2) {\n    this.light = { type: 'rgb', r: r1, g: g1, b: b1 };\n    this.dark = { type: 'rgb', r: r2, g: g2, b: b2 };\n  }\n  setID(id) {\n    this.id = id;\n  }\n  setTime(time) {\n    this.time = time;\n  }\n}\n\nexport function initializeFabricColors() {\n  function constructColor(r1, g1, b1, r2, g2, b2, id, time) {\n    var fc = new FabricColor(r1, g1, b1);\n    fc.setColor(r1, g1, b1, r2, g2, b2);\n    fc.setID(id);\n    fc.setTime(time);\n    fc.save(false);\n  }\n  constructColor(0, 0, 0, 255, 255, 255, 'default-black-white', 0);\n}\n\nexport function loadFabricColors() {\n  localforage\n    .keys()\n    .then(function (keys) {\n      keys = keys.filter((k) => (String(k).indexOf('fc-') > -1 ? true : false));\n      keys.forEach((element) => {\n        localforage.getItem(element).then(function (value) {\n          var obj = JSON.parse(String(value));\n          var fc = new FabricColor(0, 0, 0);\n          fc.setColor(obj.light.r, obj.light.g, obj.light.b, obj.dark.r, obj.dark.g, obj.dark.b);\n          fc.setID(obj.id);\n          fc.setTime(obj.time);\n          fc.save(false);\n        });\n      });\n    })\n    .catch(function (err) {});\n}\n\nexport function listFabricColors(): [] {\n  var list = [];\n  for (var g in fabric_color_list) {\n    list.push(fabric_color_list[g]);\n  }\n  list.sort(function (a, b) {\n    return a.time - b.time;\n  });\n  return list;\n}\n\nexport function setPenColor(id) {\n  pen_color_id = `fc-${id}`;\n}\n\nexport function updateFabricColorStyleTag() {\n  var list = listFabricColors();\n  var light = [];\n  var dark = [];\n  list.forEach((g) => {\n    light.push(g.obj.toCSS().light.declaration);\n    dark.push(g.obj.toCSS().dark.declaration);\n  });\n  document.querySelector('head style#fabric_color').innerHTML = `:root {${light.join('')}}@media (prefers-color-scheme: dark) {${dark.join('')}}`;\n}\n","import { registration, canvas, ctx, svg_canvas, svg_canvas_pen_layer, scale, width, height, resizeFabric, updatePenPath, registerElement, saveContent, loadContent } from './fabric/index.ts';\nimport { drawPath } from './fabric/canvas.ts';\nimport { newGroupOnSVG, drawPathOnSVG } from './fabric/svg.ts';\nimport { change_history, history_offset, log_changes, replayHistory } from './fabric/history.ts';\n\nimport { getCoordinateOnCircleBorder } from './graph/coordinate.ts';\nimport { segmentsToPath, distanceToSegment, simplifyPath, pathCommandToCoordinates } from './graph/path.ts';\n\nimport { mode, mover, move_start_x, move_start_y, move_end_x, move_end_y, move_offset_x, move_offset_y, offsetX, offsetY, touchData, touchData_a, touchData_b, start_timestamp, touch_point_identifier, pen_width_base, force_weight, speed_weight, pen_color, tole, currentPath, eraser_selected_element, eraser_hidden_element, eraser_d, eraser_color, setToolMode } from './tools/index.ts';\nimport { handleTouchStart_eraser, handleTouchMove_eraser, handleTouchEnd_eraser } from './tools/eraser.ts';\nimport { handleTouchStart_pen, handleTouchMove_pen, handleTouchEnd_pen } from './tools/pen.ts';\nimport { handleTouchStart_mover, handleTouchMove_mover, handleTouchEnd_mover } from './tools/mover.ts';\n\nimport { keys, supportsPassive, wheelOpt, wheelEvent, checkPassive, disableScroll, enableScroll } from './scroll/index.ts';\n\nimport { fabric_color_list, FabricColor, loadFabricColors, initializeFabricColors, listFabricColors, setPenColor, updateFabricColorStyleTag } from './tools/color.ts';\n\nimport './fabric/index.css';\n\nvar ripple = require('@erichsia7/ripple');\nvar localforage = require('localforage');\n\n//for development\n\nconst ErrorStackParser = require('error-stack-parser');\nconst StackTrace = require('stacktrace-js');\n\nwindow.onerror = async function (message, source, lineno, colno, error) {\n  StackTrace.fromError(error).then(function (stackTrace) {\n    var parsedStackTrace = stackTrace.map(function (frame) {\n      return {\n        functionName: frame.functionName,\n        fileName: frame.fileName,\n        lineNumber: frame.lineNumber,\n        columnNumber: frame.columnNumber\n      };\n    });\n    console.log('%c ----------', 'color: #888;');\n    parsedStackTrace.forEach((e) => {\n      console.error(`func: ${e.functionName}\\npath: ${e.fileName}\\nlocation: L${e.lineNumber} C${e.columnNumber}`);\n    });\n  });\n};\n\nwindow.fabric_initialize = function () {\n  canvas.addEventListener(\n    'touchstart',\n    function (event) {\n      if (0 <= mode <= 2) {\n        disableScroll();\n        if (mode === 0) {\n          handleTouchStart_pen(event);\n        }\n        if (mode === 1) {\n          handleTouchStart_eraser(event);\n        }\n        if (mode === 2) {\n          mover = true;\n          handleTouchStart_mover(event);\n        }\n      }\n    },\n    false\n  );\n\n  canvas.addEventListener(\n    'touchmove',\n    function (event) {\n      if (mode === 0) {\n        handleTouchMove_pen(event);\n      }\n      if (mode === 1) {\n        handleTouchMove_eraser(event);\n      }\n      if (mode === 2 && mover) {\n        handleTouchMove_mover(event);\n      }\n    },\n    false\n  );\n\n  canvas.addEventListener(\n    'touchend',\n    function (event) {\n      if (0 <= mode <= 2) {\n        enableScroll();\n        if (mode === 0) {\n          handleTouchEnd_pen(event);\n        }\n        if (mode === 1) {\n          handleTouchEnd_eraser(event);\n        }\n        if (mode === 2 && mover) {\n          handleTouchEnd_mover(event);\n          mover = false;\n        }\n      }\n      saveContent();\n    },\n    false\n  );\n\n  window.addEventListener('resize', function () {\n    resizeFabric();\n  });\n\n  ripple.addTo('.tools_container button', '#fff', 370);\n\n  document.querySelectorAll('.tools_container button[group=\"1\"]').forEach((button) => {\n    button.addEventListener('click', function () {\n      var selectedMode = parseInt(button.getAttribute('m'));\n      setToolMode(selectedMode);\n    });\n  });\n  document.querySelectorAll('.tools_container button[group=\"0\"]').forEach((button) => {\n    button.addEventListener('click', function () {\n      var selectedMode = String(button.getAttribute('m'));\n      replayHistory(selectedMode);\n    });\n  });\n  document.addEventListener(\n    'dblclick',\n    function (event) {\n      event.preventDefault();\n    },\n    false\n  );\n  resizeFabric();\n  loadContent();\n  initializeFabricColors();\n  //setPenColor('default-black-white');\n  updateFabricColorStyleTag();\n  checkPassive();\n};\n\nwindow.FabricColor = FabricColor;\nwindow.loadFabricColors = loadFabricColors;\nwindow.fabric_color_list = fabric_color_list;\n\nexport default window.fabric_initialize;\n","import { log_changes } from '../fabric/history.ts';\nimport { canvas, ctx, scale, registration } from '../fabric/index.ts';\nimport { mode, mover, move_start_x, move_start_y, move_end_x, move_end_y, move_offset_x, move_offset_y, offsetX, offsetY, touchData, touchData_a, touchData_b, start_timestamp, touch_point_identifier, pen_width_base, force_weight, speed_weight, pen_color, tole, currentPath, eraser_selected_element, eraser_hidden_element, eraser_d, eraser_color, setToolMode } from './index.ts';\n\nexport function handleTouchStart_eraser(event) {\n  eraser_selected_element = {};\n}\n\nexport function handleTouchMove_eraser(event) {\n  var touch = event.touches[0];\n  var current = {\n    x: touch.clientX - offsetX - move_offset_x,\n    y: touch.clientY - offsetY - move_offset_y\n  };\n\n  function searchGroup(x, y) {\n    var filterd_a = [];\n    var result = {};\n    for (var r in registration) {\n      var g = registration[r];\n      if (!g) {\n        continue;\n      }\n      if (g.hidden === true) {\n        continue;\n      }\n      if (g.x1 - 5 - eraser_d <= x && x <= g.x2 + 5 + eraser_d && g.y1 - 5 - eraser_d <= y && y <= g.y2 + 5 + eraser_d) {\n        filterd_a.push(g);\n      }\n    }\n    var filterd_a_len = filterd_a.length;\n    for (var i = 0; i < filterd_a_len; i++) {\n      var w = filterd_a[i];\n      var z = w.points.sort(function (a, b) {\n        return Math.sqrt(Math.pow(a.x - x, 2) + Math.pow(a.y - y, 2)) - Math.sqrt(Math.pow(b.x - x, 2) + Math.pow(b.y - y, 2));\n      });\n      if (Math.sqrt(Math.pow(z[0].x - x, 2) + Math.pow(z[0].y - y, 2)) < 10 + eraser_d) {\n        result[w.id] = true;\n        continue;\n      }\n    }\n    return result;\n  }\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  ctx.lineWidth = 1.2 * scale;\n  ctx.strokeStyle = eraser_color;\n\n  ctx.beginPath();\n  ctx.arc((current.x + offsetX + move_offset_x) * scale, (current.y + offsetY + move_offset_y) * scale, (eraser_d + 5) * scale, 0, 2 * Math.PI);\n  ctx.stroke();\n\n  eraser_selected_element = Object.assign(eraser_selected_element, searchGroup(current.x, current.y));\n  for (var k in eraser_selected_element) {\n    document.querySelector('svg#vector_fabric g#' + k).setAttributeNS(null, 'opacity', '0.25');\n  }\n}\n\nexport function handleTouchEnd_eraser(event) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  var hidden_element_identifier = [];\n  for (var k in eraser_selected_element) {\n    var target = document.querySelector('svg#vector_fabric g#' + k);\n\n    document.querySelector('svg#vector_fabric g#hidden_pen').appendChild(target);\n    target.removeAttributeNS(null, 'opacity');\n    //target.remove()\n    registration[k].hidden = true;\n    hidden_element_identifier.push(k);\n  }\n  log_changes([], hidden_element_identifier);\n}\n","import { eraser_selected_element, eraser_hidden_element, eraser_d, move_start_x, move_start_y, move_end_x, move_end_y, move_offset_x, move_offset_y, offsetX, offsetY } from './index.ts';\nimport { svg_canvas_pen_layer } from '../fabric/index.ts';\nexport function handleTouchStart_mover(event) {\n  var touch = event.touches[0];\n  var current = {\n    x: touch.clientX - offsetX,\n    y: touch.clientY - offsetY\n  };\n  move_start_x = current.x;\n  move_start_y = current.y;\n}\n\nexport function handleTouchMove_mover(event) {\n  var touch = event.touches[0];\n  var current = {\n    x: touch.clientX - offsetX,\n    y: touch.clientY - offsetY\n  };\n  move_end_x = current.x;\n  move_end_y = current.y;\n  svg_canvas_pen_layer.setAttribute('transform', `translate(${move_offset_x + move_end_x - move_start_x} ${move_offset_y + move_end_y - move_start_y})`);\n}\n\nexport function handleTouchEnd_mover(event) {\n  move_offset_x += move_end_x - move_start_x;\n  move_offset_y += move_end_y - move_start_y;\n  svg_canvas_pen_layer.setAttribute('transform', `translate(${move_offset_x} ${move_offset_y})`);\n}\n"],"names":["segmentsToPath","segments","scale","length","pathCommand","concat","x","y","i","c","n","distanceToSegment","point","start","end","dx","dy","d","t","closestPoint","Math","sqrt","simplifyPath","points","tolerance","dmax","index","leftPoints","slice","rightPoints","simplifiedLeft","simplifiedRight","pathCommandToCoordinates","str","precision","regex","m","exec","lastIndex","forEach","match","groupIndex","parseFloat","push","pX","p","pY","distance","pow","h","a","b","abs","x1","y1","x2","y2","min","max","mode","mover","move_start_x","move_start_y","move_end_x","move_end_y","move_offset_x","move_offset_y","touchData","touchData_a","touchData_b","touch_point_identifier","pen_width_base","force_weight","speed_weight","pen_color","tole","log","currentPath","eraser_selected_element","eraser_d","localforage","require","canvas","document","querySelector","ctx","getContext","svg_canvas","svg_canvas_pen_layer","window","devicePixelRatio","width","innerWidth","height","innerHeight","registration","resizeFabric","setAttributeNS","style","background","updatePenPath","registerElement","coordinates","id","map","e","apply","_toConsumableArray","hidden","saveContent","setItem","String","innerHTML","then","err","change_history","history_offset","log_changes","addition","deletion","getCoordinateOnCircleBorder","centerX","centerY","radius","radian","cos","toFixed","sin","degree","PI","uuidv4","v4","newGroupOnSVG","createElementNS","appendChild","drawPathOnSVG","pathData","color","container","drawPath","path","Path2D","lineCap","lineWidth","strokeStyle","stroke","closePath","handleTouchEnd_pen","event","touches","changedTouches","hasOwnProperty","_typeof","r","touch","filter","identifier","clientX","clientY","force","time_stamp","Date","getTime","angle","g","Object","assign","clearRect","group","ca","cb","cc","keys","supportsPassive","wheelOpt","passive","wheelEvent","createElement","preventDefault","preventDefaultForScrollKeys","keyCode","fabric_color_list","FabricColor","_classCallCheck","floor","this","light","type","dark","time","key","value","componentToHex","hex","toString","toUpperCase","rgbToHex","color_scheme","mf","matchMedia","matches","current","toHEX","declaration","application","lf","obj","JSON","stringify","toCSS","r1","g1","b1","r2","g2","b2","updateFabricColorStyleTag","list","sort","listFabricColors","join","_regeneratorRuntime","prototype","o","defineProperty","Symbol","iterator","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","arg","call","l","f","s","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","v","values","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","info","error","ripple","StackTrace","onerror","fn","_ref","_callee","message","source","lineno","colno","_context","fromError","stackTrace","parsedStackTrace","frame","functionName","fileName","lineNumber","columnNumber","console","self","args","arguments","undefined","_x","_x2","_x3","_x4","_x5","fabric_initialize","fc","addEventListener","beginPath","arc","fillStyle","fill","handleTouchStart_pen","handleTouchStart_mover","angleRadians","atan2","speed","c1","c2","handleTouchMove_pen","k","filterd_a","result","filterd_a_len","w","z","searchGroup","handleTouchMove_eraser","setAttribute","handleTouchMove_mover","removeEventListener","hidden_element_identifier","target","removeAttributeNS","handleTouchEnd_eraser","addTo","querySelectorAll","button","getSelector","classList","remove","add","setToolMode","parseInt","getAttribute","prev_addition","prev_deletion","prev_addition_len","prev_deletion_len","displayed_element_identifier","splice","replayHistory","getItem","elements","elements_length","_step","_iterator","_createForOfIteratorHelper","children","child","tagName","toLowerCase","setColor","setID","setTime","save","get","checkPassive","loadFabricColors","indexOf","element","parse"],"sourceRoot":""}