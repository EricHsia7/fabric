{"version":3,"file":"main-102ff935.dd5cdd6addff29106f9e.min.js","mappings":";oIAGO,SAASA,EAASC,EAAKC,EAAUC,GACtC,IAAIC,EAAO,IAAIC,OAAOH,GACtBD,EAAIK,QAAU,QACdL,EAAIM,UAAYC,EAAAA,GAAiBC,EAAAA,GACjCR,EAAIS,YAAcP,EAClBF,EAAIU,OAAOP,GACXH,EAAIW,WACN,8CCRWC,EAAyD,GAG7D,SAASC,EAAYC,EAAUC,GACV,IAApBD,EAASE,QAAoC,IAApBD,EAASC,SACtCJ,EAAeK,KAAK,CAClBH,SAAUA,EACVC,SAAUA,IAEK,EAErB,u2BCRO,IAAIG,EAASC,SAASC,cAAc,WAChCpB,EAAMkB,EAAOG,WAAW,MAExBC,GADaH,SAASC,cAAc,kBACbD,SAASC,cAAc,yBAC9CZ,EAAQe,KAAKC,IAAIC,OAAOC,kBAAoBH,KAAKC,IAAID,KAAKI,IAAI,EAAG,KAGjEC,GAFQH,OAAOI,WACNJ,OAAOK,YACO,CAAC,GAa5B,SAASC,IACdC,EAAAA,GAAYC,GAAIC,EAAAA,EAAAA,IAAeC,EAAAA,GAAW,GAC1CH,EAAAA,GAAYI,GAAIF,EAAAA,EAAAA,KAAeG,EAAAA,EAAAA,IAAaC,EAAAA,GAAaC,EAAAA,IAAMC,OAAOF,EAAAA,GAAYA,EAAAA,GAAYtB,OAAS,IAAK,GAC5GgB,EAAAA,GAAYS,GAAIP,EAAAA,EAAAA,KAAeG,EAAAA,EAAAA,IAAaK,EAAAA,GAAaH,EAAAA,IAAMC,OAAOE,EAAAA,GAAYA,EAAAA,GAAY1B,OAAS,IAAK,EAC9G,CAEO,SAAS2B,EAAgBC,EAAaC,GAC3C,IAAIC,EAAIF,EAAYG,KAAI,SAACC,GAAC,OAAKA,EAAEF,CAAC,IAC9BG,EAAIL,EAAYG,KAAI,SAACC,GAAC,OAAKA,EAAEC,CAAC,IAClCrB,EAAaiB,GAAM,CACjBK,GAAI3B,KAAK4B,IAAGC,MAAR7B,KAAI8B,EAAQP,IAChBQ,GAAI/B,KAAK4B,IAAGC,MAAR7B,KAAI8B,EAAQJ,IAChBM,GAAIhC,KAAKiC,IAAGJ,MAAR7B,KAAI8B,EAAQP,IAChBW,GAAIlC,KAAKiC,IAAGJ,MAAR7B,KAAI8B,EAAQJ,IAChBS,OAAQd,EACRC,GAAIA,EACJc,QAAQ,EAEZ,iFCvCO,SAASC,IACd,IAAIC,EAAI1C,SAAS2C,gBAAgB,6BAA8B,KAC3DjB,EAAK,MAAOkB,EAAAA,EAAAA,KAIhB,OAHAF,EAAEG,eAAe,KAAM,KAAMnB,GAE7BvB,EAAAA,GAAqB2C,YAAYJ,GAC1BhB,CACT,CAEO,SAASqB,EAAcjE,EAAUC,EAAOiE,GAC7C,IAAIN,EAAI1C,SAAS2C,gBAAgB,6BAA8B,QAC/DD,EAAEG,eAAe,KAAM,IAAK/D,GAC5B4D,EAAEG,eAAe,KAAM,eAAgBzD,EAAAA,IACvCsD,EAAEG,eAAe,KAAM,SAAU9D,GACjC2D,EAAEG,eAAe,KAAM,OAAQ,QAC/BH,EAAEG,eAAe,KAAM,iBAAkB,SACzCH,EAAEG,eAAe,KAAM,YAAa,WACpCH,EAAEG,eAAe,KAAM,MAAMD,EAAAA,EAAAA,OAC7BI,EAAYhD,SAASC,cAAc,IAAM+C,IAAc7C,EAAAA,IAC7C2C,YAAYJ,EACxB,CAEO,SAASO,EAAgBtB,EAAGG,EAAGoB,EAAGnE,EAAOiE,GAC9C,IAAIN,EAAI1C,SAAS2C,gBAAgB,6BAA8B,UAC/DD,EAAEG,eAAe,KAAM,KAAMlB,GAC7Be,EAAEG,eAAe,KAAM,KAAMf,GAC7BY,EAAEG,eAAe,KAAM,IAAKK,GAC5BR,EAAEG,eAAe,KAAM,SAAU,QACjCH,EAAEG,eAAe,KAAM,OAAQ9D,GAC/B2D,EAAEG,eAAe,KAAM,iBAAkB,SACzCH,EAAEG,eAAe,KAAM,YAAa,WACpCH,EAAEG,eAAe,KAAM,MAAMD,EAAAA,EAAAA,OAC7BI,EAAYhD,SAASC,cAAc,IAAM+C,IAAc7C,EAAAA,IAC7C2C,YAAYJ,EACxB,iBCtCO,SAASS,EAA4BC,EAASC,EAASC,EAAQC,GAMpE,MAAO,CAAE5B,EAHD6B,YAAYJ,EAAUhD,KAAKqD,IAAIF,GAAUD,GAAQI,QAAQ,KAGrD5B,EAFJ0B,YAAYH,EAAUjD,KAAKuD,IAAIJ,GAAUD,GAAQI,QAAQ,KAElDH,OAAAA,EAAQK,OADVL,GAAU,IAAMnD,KAAKyD,IACHP,OAAAA,EACjC,iCCPO,SAASvC,EAAe+C,EAAUzE,GACvC,GAAIyE,EAASjE,OAAS,EACpB,MAAO,GAGT,IADA,IAAIkE,EAAc,IAAH1C,OAAOyC,EAAS,GAAGnC,EAAItC,EAAK,KAAAgC,OAAIyC,EAAS,GAAGhC,EAAIzC,GACtD2E,EAAI,EAAGA,EAAIF,EAASjE,OAAS,EAAGmE,IAAK,CAC5C,IAAIlD,EAAIgD,EAASE,GACbC,EAAIH,EAASE,EAAI,IAAMlD,EAE3BiD,GAAe,IAAJ1C,OAAQP,EAAEa,EAAItC,EAAK,KAAAgC,OAAIP,EAAEgB,EAAIzC,EAAK,KAAAgC,QAAKP,EAAEa,EAAItC,EAAQ4E,EAAEtC,EAAItC,GAAS,EAAC,KAAAgC,QAAKP,EAAEgB,EAAIzC,EAAQ4E,EAAEnC,EAAIzC,GAAS,EACpH,CACA,OAAO0E,CACT,CAEO,SAASG,EAAkBC,EAAOC,EAAOC,GAC9C,IAAIC,EAAKD,EAAI1C,EAAIyC,EAAMzC,EACnB4C,EAAKF,EAAIvC,EAAIsC,EAAMtC,EACnB0C,EAAIF,EAAKA,EAAKC,EAAKA,EACnBE,IAAMN,EAAMxC,EAAIyC,EAAMzC,GAAK2C,GAAMH,EAAMrC,EAAIsC,EAAMtC,GAAKyC,GAAMC,EAEhE,GAAIC,EAAI,EACNH,EAAKH,EAAMxC,EAAIyC,EAAMzC,EACrB4C,EAAKJ,EAAMrC,EAAIsC,EAAMtC,OAChB,GAAI2C,EAAI,EACbH,EAAKH,EAAMxC,EAAI0C,EAAI1C,EACnB4C,EAAKJ,EAAMrC,EAAIuC,EAAIvC,MACd,CACL,IAAI4C,EAAe,CAAE/C,EAAGyC,EAAMzC,EAAI8C,EAAIH,EAAIxC,EAAGsC,EAAMtC,EAAI2C,EAAIF,GAC3DD,EAAKH,EAAMxC,EAAI+C,EAAa/C,EAC5B4C,EAAKJ,EAAMrC,EAAI4C,EAAa5C,CAC9B,CAEA,OAAO1B,KAAKuE,KAAKL,EAAKA,EAAKC,EAAKA,EAClC,CAEO,SAASrD,EAAaqB,EAAQqC,GACnC,GAAIrC,EAAO1C,OAAS,EAClB,OAAO0C,EAOT,IAJA,IAAIsC,EAAO,EACPC,EAAQ,EAGHd,EAAI,EAAGA,EAAIzB,EAAO1C,OAAS,EAAGmE,IAAK,CAC1C,IAAIQ,EAAIN,EAAkB3B,EAAOyB,GAAIzB,EAAO,GAAIA,EAAOA,EAAO1C,OAAS,IACnE2E,EAAIK,IACNC,EAAQd,EACRa,EAAOL,EAEX,CAGA,GAAIK,EAAOD,EAAW,CACpB,IAAIG,EAAaxC,EAAOyC,MAAM,EAAGF,EAAQ,GACrCG,EAAc1C,EAAOyC,MAAMF,GAC3BI,EAAiBhE,EAAa6D,EAAYH,GAC1CO,EAAkBjE,EAAa+D,EAAaL,GAChD,OAAOM,EAAeF,MAAM,EAAGE,EAAerF,OAAS,GAAGwB,OAAO8D,EACnE,CACE,MAAO,CAAC5C,EAAO,GAAIA,EAAOA,EAAO1C,OAAS,GAE9C,CAEO,SAASuF,EAAyBC,EAAKC,GAI5C,IAHA,IAAI/C,EAAS,GACTgD,EAAQ,8eACRC,EAAID,EAAME,KAAKJ,GACc,QAAzBG,EAAID,EAAME,KAAKJ,KAEjBG,EAAEV,QAAUS,EAAMG,WACpBH,EAAMG,YAGRF,EAAEG,SAAQ,SAACC,EAAOC,GAChB,GAAc,MAAVD,EAAe,CACjB,IAAIjE,EAAI6B,WAAWgC,EAAEK,EAAa,IAC9B/D,EAAI0B,WAAWgC,EAAEK,EAAa,IAClCtD,EAAOzC,KAAK,CAAE6B,EAAAA,EAAGG,EAAAA,GACnB,CACA,GAAc,MAAV8D,EAAe,CACbjE,EAAI6B,WAAWgC,EAAEK,EAAa,IAC9B/D,EAAI0B,WAAWgC,EAAEK,EAAa,IADlC,IAGIC,GADApD,EAAIH,EAAOA,EAAO1C,OAAS,IAAM,CAAE8B,EAAG,KAAMG,EAAG,OACxCH,EACPoE,EAAKrD,EAAEZ,EACX,GAAW,OAAPgE,GAAsB,OAAPC,EACjBxD,EAAOzC,KAAK,CAAE6B,EAAAA,EAAGG,EAAAA,SAGjB,IADA,IAAIkE,EAAW5F,KAAKuE,KAAKvE,KAAKI,IAAImB,EAAImE,EAAI,GAAK1F,KAAKI,IAAIsB,EAAIiE,EAAI,IACvDE,EAAI,EAAGA,EAAID,EAAWV,EAAWW,IAAK,CAC7C,IAAIhF,EAAI6E,EAAiBG,GAAKD,EAAWV,IAA3B3D,EAAImE,GACdxE,EAAIyE,EAAiBE,GAAKD,EAAWV,IAA3BxD,EAAIiE,GAClBxD,EAAOzC,KAAK,CAAE6B,EAAGV,EAAGa,EAAGR,GACzB,CAEJ,CACA,GAAc,MAAVsE,EAAe,CACbjE,EAAI6D,EAAEK,EAAa,GACnB/D,EAAI,EAEJgE,GADApD,EAAIH,EAAOA,EAAO1C,OAAS,IAAM,CAAE8B,EAAG,KAAMG,EAAG,OACxCH,EACPoE,EAAKrD,EAAEZ,EACX,GAAW,OAAPgE,GAAsB,OAAPC,EACjBxD,EAAOzC,KAAK,CAAE6B,EAAAA,EAAGG,EAAAA,SAGjB,IADIkE,EAAW5F,KAAK8F,IAAIvE,EAAImE,GACnBG,EAAI,EAAGA,EAAID,EAAWV,EAAWW,IAAK,CACzChF,EAAI6E,EAAiBG,GAAKD,EAAWV,IAA3B3D,EAAImE,GAClBvD,EAAOzC,KAAK,CAAE6B,EAAGV,EAAGa,EAAGiE,GACzB,CAEJ,CACA,GAAc,MAAVH,EAAe,CACbjE,EAAI,EACJG,EAAI0D,EAAEK,EAAa,GAEnBC,GADApD,EAAIH,EAAOA,EAAO1C,OAAS,IAAM,CAAE8B,EAAG,KAAMG,EAAG,OACxCH,EACPoE,EAAKrD,EAAEZ,EACX,GAAW,OAAPgE,GAAsB,OAAPC,EACjBxD,EAAOzC,KAAK,CAAE6B,EAAAA,EAAGG,EAAAA,SAGjB,IADIkE,EAAW5F,KAAK8F,IAAIpE,EAAIiE,GACnBE,EAAI,EAAGA,EAAID,EAAWV,EAAWW,IAAK,CACzChF,EAAI8E,EAAiBE,GAAKD,EAAWV,IAA3BxD,EAAIiE,GAClBxD,EAAOzC,KAAK,CAAE6B,EAAGmE,EAAIhE,EAAGb,GAC1B,CAEJ,CACA,GAAc,MAAV2E,EAAe,CACjB,IAAI7D,EAAKyD,EAAEK,EAAa,GACpB1D,EAAKqD,EAAEK,EAAa,GACpBzD,EAAKoD,EAAEK,EAAa,GACpBvD,EAAKkD,EAAEK,EAAa,GACpBlE,EAAI6D,EAAEK,EAAa,GACnB/D,EAAI0D,EAAEK,EAAa,GAEnBC,GADApD,EAAIH,EAAOA,EAAO1C,OAAS,IAAM,CAAE8B,EAAG,KAAMG,EAAG,OACxCH,EACPoE,EAAKrD,EAAEZ,EACX,GAAW,OAAPgE,GAAsB,OAAPC,EACjBxD,EAAOzC,KAAK,CAAE6B,EAAAA,EAAGG,EAAAA,SAGjB,IADIkE,EAAW5F,KAAKuE,KAAKvE,KAAKI,IAAImB,EAAImE,EAAI,GAAK1F,KAAKI,IAAIsB,EAAIiE,EAAI,IACvDE,EAAI,EAAGA,EAAID,EAAWV,EAAWW,IAAK,CAC7C,IAAIxB,EAAIrE,KAAK4B,IAAI5B,KAAKiC,IAAI4D,GAAKD,EAAWV,GAAY,GAAI,GACtDrE,EAAIb,KAAKI,IAAI,EAAIiE,EAAG,GAAKqB,EAAK,EAAI1F,KAAKI,IAAI,EAAIiE,EAAG,GAAKA,EAAI1C,EAAK,GAAK,EAAI0C,GAAKrE,KAAKI,IAAIiE,EAAG,GAAKrC,EAAKhC,KAAKI,IAAIiE,EAAG,GAAK9C,EACrHL,EAAIlB,KAAKI,IAAI,EAAIiE,EAAG,GAAKsB,EAAK,EAAI3F,KAAKI,IAAI,EAAIiE,EAAG,GAAKA,EAAItC,EAAK,GAAK,EAAIsC,GAAKrE,KAAKI,IAAIiE,EAAG,GAAKnC,EAAKlC,KAAKI,IAAIiE,EAAG,GAAK3C,EAEzHS,EAAOzC,KAAK,CAAE6B,EAAGV,EAAGa,EAAGR,GACzB,CAEJ,CACA,GAAc,MAAVsE,EAAe,CACbxD,EAAKoD,EAAEK,EAAa,GACpBvD,EAAKkD,EAAEK,EAAa,GACpBlE,EAAI6D,EAAEK,EAAa,GACnB/D,EAAI0D,EAAEK,EAAa,GAEnBC,GADApD,EAAIH,EAAOA,EAAO1C,OAAS,IAAM,CAAE8B,EAAG,KAAMG,EAAG,OACxCH,EACPoE,EAAKrD,EAAEZ,EAEX,GAAW,OAAPgE,GAAsB,OAAPC,EACjBxD,EAAOzC,KAAK,CAAE6B,EAAAA,EAAGG,EAAAA,SAGjB,IADIkE,EAAW5F,KAAKuE,KAAKvE,KAAKI,IAAImB,EAAImE,EAAI,GAAK1F,KAAKI,IAAIsB,EAAIiE,EAAI,IACvDE,EAAI,EAAGA,EAAID,EAAWV,EAAWW,IAAK,CACzCxB,EAAIrE,KAAK4B,IAAI5B,KAAKiC,IAAI4D,GAAKD,EAAWV,GAAY,GAAI,GACtDrE,EAAIb,KAAKI,IAAI,EAAIiE,EAAG,GAAKqB,EAAK,EAAI1F,KAAKI,IAAI,EAAIiE,EAAG,GAAKA,GAAK,EAAIqB,EAAK1D,GAAM,GAAK,EAAIqC,GAAKrE,KAAKI,IAAIiE,EAAG,GAAKrC,EAAKhC,KAAKI,IAAIiE,EAAG,GAAK9C,EAChIL,EAAIlB,KAAKI,IAAI,EAAIiE,EAAG,GAAKsB,EAAK,EAAI3F,KAAKI,IAAI,EAAIiE,EAAG,GAAKA,GAAK,EAAIsB,EAAKzD,GAAM,GAAK,EAAImC,GAAKrE,KAAKI,IAAIiE,EAAG,GAAKnC,EAAKlC,KAAKI,IAAIiE,EAAG,GAAK3C,EACpIS,EAAOzC,KAAK,CAAE6B,EAAGV,EAAGa,EAAGR,GACzB,CAEJ,CACA,GAAc,MAAVsE,EAAe,CACjB,IAIIlD,EAJAX,EAAKyB,WAAWgC,EAAEK,EAAa,IAC/B1D,EAAKqB,WAAWgC,EAAEK,EAAa,IAC/BlE,EAAI6B,WAAWgC,EAAEK,EAAa,IAC9B/D,EAAI0B,WAAWgC,EAAEK,EAAa,IAE9BC,GADApD,EAAIH,EAAOA,EAAO1C,OAAS,IAAM,CAAE8B,EAAG,KAAMG,EAAG,OACxCH,EACPoE,EAAKrD,EAAEZ,EACX,GAAW,OAAPgE,GAAsB,OAAPC,EACjBxD,EAAOzC,KAAK,CAAE6B,EAAAA,EAAGG,EAAAA,SAGjB,IADIkE,EAAW5F,KAAKuE,KAAKvE,KAAKI,IAAImB,EAAImE,EAAI,GAAK1F,KAAKI,IAAIsB,EAAIiE,EAAI,IACvDE,EAAI,EAAGA,EAAID,EAAWV,EAAWW,IAAK,CACzCxB,EAAIrE,KAAK4B,IAAI5B,KAAKiC,IAAI4D,GAAKD,EAAWV,GAAY,GAAI,GACtDrE,EAAIb,KAAKI,IAAI,EAAIiE,EAAG,GAAKqB,EAAK,GAAK,EAAIrB,GAAKA,EAAI1C,EAAK3B,KAAKI,IAAIiE,EAAG,GAAK9C,EACtEL,EAAIlB,KAAKI,IAAI,EAAIiE,EAAG,GAAKsB,EAAK,GAAK,EAAItB,GAAKA,EAAItC,EAAK/B,KAAKI,IAAIiE,EAAG,GAAK3C,EAC1ES,EAAOzC,KAAK,CAAE6B,EAAGV,EAAGa,EAAGR,GACzB,CAEJ,CACA,GAAc,MAAVsE,EACEjE,EAAI6D,EAAEK,EAAa,GACnB/D,EAAI0D,EAAEK,EAAa,EAK3B,IAEF,OAAOtD,CACT,sYC1MA4D,EAAA,kBAAAtE,CAAA,MAAA4C,EAAA5C,EAAA,GAAAqB,EAAAkD,OAAAC,UAAApC,EAAAf,EAAAoD,eAAAC,EAAAH,OAAAI,gBAAA,SAAA/B,EAAA5C,EAAAqB,GAAAuB,EAAA5C,GAAAqB,EAAAuD,KAAA,EAAAzC,EAAA,mBAAA0C,OAAAA,OAAA,GAAAzF,EAAA+C,EAAA2C,UAAA,aAAA7F,EAAAkD,EAAA4C,eAAA,kBAAAC,EAAA7C,EAAA8C,aAAA,yBAAAC,EAAAtC,EAAA5C,EAAAqB,GAAA,OAAAkD,OAAAI,eAAA/B,EAAA5C,EAAA,CAAA4E,MAAAvD,EAAA8D,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAzC,EAAA5C,EAAA,KAAAkF,EAAA,aAAAtC,GAAAsC,EAAA,SAAAtC,EAAA5C,EAAAqB,GAAA,OAAAuB,EAAA5C,GAAAqB,CAAA,WAAAiE,EAAA1C,EAAA5C,EAAAqB,EAAAe,GAAA,IAAAD,EAAAnC,GAAAA,EAAAwE,qBAAAe,EAAAvF,EAAAuF,EAAAnG,EAAAmF,OAAAiB,OAAArD,EAAAqC,WAAAvF,EAAA,IAAAwG,EAAArD,GAAA,WAAAsC,EAAAtF,EAAA,WAAAwF,MAAAc,EAAA9C,EAAAvB,EAAApC,KAAAG,CAAA,UAAAuG,EAAA/C,EAAA5C,EAAAqB,GAAA,WAAAuE,KAAA,SAAAC,IAAAjD,EAAAkD,KAAA9F,EAAAqB,GAAA,OAAAuB,GAAA,OAAAgD,KAAA,QAAAC,IAAAjD,EAAA,EAAA5C,EAAAsF,KAAAA,EAAA,IAAAlB,EAAA,iBAAA2B,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAhG,EAAA,YAAAsF,IAAA,UAAAW,IAAA,UAAAC,IAAA,KAAAtF,EAAA,GAAAqE,EAAArE,EAAAzB,GAAA,8BAAAuD,EAAA4B,OAAA6B,eAAAC,EAAA1D,GAAAA,EAAAA,EAAA2D,EAAA,MAAAD,GAAAA,IAAAhF,GAAAe,EAAA0D,KAAAO,EAAAjH,KAAAyB,EAAAwF,GAAA,IAAAE,EAAAJ,EAAA3B,UAAAe,EAAAf,UAAAD,OAAAiB,OAAA3E,GAAA,SAAA2F,EAAA5D,GAAA,0BAAAkB,SAAA,SAAA9D,GAAAkF,EAAAtC,EAAA5C,GAAA,SAAA4C,GAAA,YAAA6D,QAAAzG,EAAA4C,EAAA,gBAAA8D,EAAA9D,EAAA5C,GAAA,SAAA2G,EAAAtF,EAAAqD,EAAAvC,EAAA/C,GAAA,IAAAH,EAAA0G,EAAA/C,EAAAvB,GAAAuB,EAAA8B,GAAA,aAAAzF,EAAA2G,KAAA,KAAAZ,EAAA/F,EAAA4G,IAAAzB,EAAAY,EAAAJ,MAAA,OAAAR,GAAA,UAAAwC,EAAAxC,IAAAhC,EAAA0D,KAAA1B,EAAA,WAAApE,EAAA6G,QAAAzC,EAAA0C,SAAAC,MAAA,SAAAnE,GAAA+D,EAAA,OAAA/D,EAAAT,EAAA/C,EAAA,aAAAwD,GAAA+D,EAAA,QAAA/D,EAAAT,EAAA/C,EAAA,IAAAY,EAAA6G,QAAAzC,GAAA2C,MAAA,SAAAnE,GAAAoC,EAAAJ,MAAAhC,EAAAT,EAAA6C,EAAA,aAAApC,GAAA,OAAA+D,EAAA,QAAA/D,EAAAT,EAAA/C,EAAA,IAAAA,EAAAH,EAAA4G,IAAA,KAAAxE,EAAAqD,EAAA,gBAAAE,MAAA,SAAAhC,EAAAR,GAAA,SAAA4E,IAAA,WAAAhH,GAAA,SAAAA,EAAAqB,GAAAsF,EAAA/D,EAAAR,EAAApC,EAAAqB,EAAA,WAAAA,EAAAA,EAAAA,EAAA0F,KAAAC,EAAAA,GAAAA,GAAA,aAAAtB,EAAA1F,EAAAqB,EAAAe,GAAA,IAAAsC,EAAAN,EAAA,gBAAAjC,EAAA/C,GAAA,GAAAsF,IAAAsB,EAAA,UAAAiB,MAAA,mCAAAvC,IAAAuB,EAAA,cAAA9D,EAAA,MAAA/C,EAAA,OAAAwF,MAAAhC,EAAAsE,MAAA,OAAA9E,EAAA+E,OAAAhF,EAAAC,EAAAyD,IAAAzG,IAAA,KAAAH,EAAAmD,EAAAgF,SAAA,GAAAnI,EAAA,KAAA+F,EAAAqC,EAAApI,EAAAmD,GAAA,GAAA4C,EAAA,IAAAA,IAAA/E,EAAA,gBAAA+E,CAAA,cAAA5C,EAAA+E,OAAA/E,EAAAkF,KAAAlF,EAAAmF,MAAAnF,EAAAyD,SAAA,aAAAzD,EAAA+E,OAAA,IAAAzC,IAAAN,EAAA,MAAAM,EAAAuB,EAAA7D,EAAAyD,IAAAzD,EAAAoF,kBAAApF,EAAAyD,IAAA,gBAAAzD,EAAA+E,QAAA/E,EAAAqF,OAAA,SAAArF,EAAAyD,KAAAnB,EAAAsB,EAAA,IAAAnF,EAAA8E,EAAA3F,EAAAqB,EAAAe,GAAA,cAAAvB,EAAA+E,KAAA,IAAAlB,EAAAtC,EAAA8E,KAAAjB,EAAAF,EAAAlF,EAAAgF,MAAA5F,EAAA,gBAAA2E,MAAA/D,EAAAgF,IAAAqB,KAAA9E,EAAA8E,KAAA,WAAArG,EAAA+E,OAAAlB,EAAAuB,EAAA7D,EAAA+E,OAAA,QAAA/E,EAAAyD,IAAAhF,EAAAgF,IAAA,YAAAwB,EAAArH,EAAAqB,GAAA,IAAAe,EAAAf,EAAA8F,OAAAzC,EAAA1E,EAAA8E,SAAA1C,GAAA,GAAAsC,IAAA9B,EAAA,OAAAvB,EAAA+F,SAAA,eAAAhF,GAAApC,EAAA8E,SAAA,SAAAzD,EAAA8F,OAAA,SAAA9F,EAAAwE,IAAAjD,EAAAyE,EAAArH,EAAAqB,GAAA,UAAAA,EAAA8F,SAAA,WAAA/E,IAAAf,EAAA8F,OAAA,QAAA9F,EAAAwE,IAAA,IAAA6B,UAAA,oCAAAtF,EAAA,aAAAnC,EAAA,IAAAkC,EAAAwD,EAAAjB,EAAA1E,EAAA8E,SAAAzD,EAAAwE,KAAA,aAAA1D,EAAAyD,KAAA,OAAAvE,EAAA8F,OAAA,QAAA9F,EAAAwE,IAAA1D,EAAA0D,IAAAxE,EAAA+F,SAAA,KAAAnH,EAAA,IAAAb,EAAA+C,EAAA0D,IAAA,OAAAzG,EAAAA,EAAA8H,MAAA7F,EAAArB,EAAA2H,YAAAvI,EAAAwF,MAAAvD,EAAAuG,KAAA5H,EAAA6H,QAAA,WAAAxG,EAAA8F,SAAA9F,EAAA8F,OAAA,OAAA9F,EAAAwE,IAAAjD,GAAAvB,EAAA+F,SAAA,KAAAnH,GAAAb,GAAAiC,EAAA8F,OAAA,QAAA9F,EAAAwE,IAAA,IAAA6B,UAAA,oCAAArG,EAAA+F,SAAA,KAAAnH,EAAA,UAAA6H,EAAAlF,GAAA,IAAA5C,EAAA,CAAA+H,OAAAnF,EAAA,SAAAA,IAAA5C,EAAAgI,SAAApF,EAAA,SAAAA,IAAA5C,EAAAiI,WAAArF,EAAA,GAAA5C,EAAAkI,SAAAtF,EAAA,SAAAuF,WAAAlK,KAAA+B,EAAA,UAAAoI,EAAAxF,GAAA,IAAA5C,EAAA4C,EAAAyF,YAAA,GAAArI,EAAA4F,KAAA,gBAAA5F,EAAA6F,IAAAjD,EAAAyF,WAAArI,CAAA,UAAAyF,EAAA7C,GAAA,KAAAuF,WAAA,EAAAJ,OAAA,SAAAnF,EAAAkB,QAAAgE,EAAA,WAAAQ,OAAA,YAAAhC,EAAAtG,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAqB,EAAArB,EAAAZ,GAAA,GAAAiC,EAAA,OAAAA,EAAAyE,KAAA9F,GAAA,sBAAAA,EAAA4H,KAAA,OAAA5H,EAAA,IAAAuI,MAAAvI,EAAAhC,QAAA,KAAA0G,GAAA,EAAAvC,EAAA,SAAAyF,IAAA,OAAAlD,EAAA1E,EAAAhC,QAAA,GAAAoE,EAAA0D,KAAA9F,EAAA0E,GAAA,OAAAkD,EAAAhD,MAAA5E,EAAA0E,GAAAkD,EAAAV,MAAA,EAAAU,EAAA,OAAAA,EAAAhD,MAAAhC,EAAAgF,EAAAV,MAAA,EAAAU,CAAA,SAAAzF,EAAAyF,KAAAzF,CAAA,YAAAuF,UAAAd,EAAA5G,GAAA,2BAAAkG,EAAA1B,UAAA2B,EAAAzB,EAAA6B,EAAA,eAAA3B,MAAAuB,EAAAf,cAAA,IAAAV,EAAAyB,EAAA,eAAAvB,MAAAsB,EAAAd,cAAA,IAAAc,EAAAsC,YAAAtD,EAAAiB,EAAAnB,EAAA,qBAAAhF,EAAAyI,oBAAA,SAAA7F,GAAA,IAAA5C,EAAA,mBAAA4C,GAAAA,EAAA8F,YAAA,QAAA1I,IAAAA,IAAAkG,GAAA,uBAAAlG,EAAAwI,aAAAxI,EAAA2I,MAAA,EAAA3I,EAAA4I,KAAA,SAAAhG,GAAA,OAAA2B,OAAAsE,eAAAtE,OAAAsE,eAAAjG,EAAAuD,IAAAvD,EAAAkG,UAAA3C,EAAAjB,EAAAtC,EAAAoC,EAAA,sBAAApC,EAAA4B,UAAAD,OAAAiB,OAAAe,GAAA3D,CAAA,EAAA5C,EAAA+I,MAAA,SAAAnG,GAAA,OAAAkE,QAAAlE,EAAA,EAAA4D,EAAAE,EAAAlC,WAAAU,EAAAwB,EAAAlC,UAAAvF,GAAA,0BAAAe,EAAA0G,cAAAA,EAAA1G,EAAAgJ,MAAA,SAAApG,EAAAvB,EAAAe,EAAAsC,EAAAvC,QAAA,IAAAA,IAAAA,EAAA8G,SAAA,IAAA7J,EAAA,IAAAsH,EAAApB,EAAA1C,EAAAvB,EAAAe,EAAAsC,GAAAvC,GAAA,OAAAnC,EAAAyI,oBAAApH,GAAAjC,EAAAA,EAAAwI,OAAAb,MAAA,SAAAnE,GAAA,OAAAA,EAAAsE,KAAAtE,EAAAgC,MAAAxF,EAAAwI,MAAA,KAAApB,EAAAD,GAAArB,EAAAqB,EAAAvB,EAAA,aAAAE,EAAAqB,EAAAnH,GAAA,0BAAA8F,EAAAqB,EAAA,qDAAAvG,EAAAkJ,KAAA,SAAAtG,GAAA,IAAA5C,EAAAuE,OAAA3B,GAAAvB,EAAA,WAAAe,KAAApC,EAAAqB,EAAApD,KAAAmE,GAAA,OAAAf,EAAA8H,UAAA,SAAAvB,IAAA,KAAAvG,EAAArD,QAAA,KAAA4E,EAAAvB,EAAA+H,MAAA,GAAAxG,KAAA5C,EAAA,OAAA4H,EAAAhD,MAAAhC,EAAAgF,EAAAV,MAAA,EAAAU,CAAA,QAAAA,EAAAV,MAAA,EAAAU,CAAA,GAAA5H,EAAAsG,OAAAA,EAAAb,EAAAjB,UAAA,CAAAkE,YAAAjD,EAAA6C,MAAA,SAAAtI,GAAA,QAAAqJ,KAAA,OAAAzB,KAAA,OAAAN,KAAA,KAAAC,MAAA3E,EAAA,KAAAsE,MAAA,OAAAE,SAAA,UAAAD,OAAA,YAAAtB,IAAAjD,EAAA,KAAAuF,WAAArE,QAAAsE,IAAApI,EAAA,QAAAqB,KAAA,WAAAA,EAAAiI,OAAA,IAAAlH,EAAA0D,KAAA,KAAAzE,KAAAkH,OAAAlH,EAAA8B,MAAA,WAAA9B,GAAAuB,EAAA,EAAA2G,KAAA,gBAAArC,MAAA,MAAAtE,EAAA,KAAAuF,WAAA,GAAAE,WAAA,aAAAzF,EAAAgD,KAAA,MAAAhD,EAAAiD,IAAA,YAAA2D,IAAA,EAAAhC,kBAAA,SAAAxH,GAAA,QAAAkH,KAAA,MAAAlH,EAAA,IAAAqB,EAAA,cAAAoI,EAAArH,EAAAsC,GAAA,OAAAtF,EAAAwG,KAAA,QAAAxG,EAAAyG,IAAA7F,EAAAqB,EAAAuG,KAAAxF,EAAAsC,IAAArD,EAAA8F,OAAA,OAAA9F,EAAAwE,IAAAjD,KAAA8B,CAAA,SAAAA,EAAA,KAAAyD,WAAAnK,OAAA,EAAA0G,GAAA,IAAAA,EAAA,KAAAvC,EAAA,KAAAgG,WAAAzD,GAAAtF,EAAA+C,EAAAkG,WAAA,YAAAlG,EAAA4F,OAAA,OAAA0B,EAAA,UAAAtH,EAAA4F,QAAA,KAAAsB,KAAA,KAAApK,EAAAmD,EAAA0D,KAAA3D,EAAA,YAAA6C,EAAA5C,EAAA0D,KAAA3D,EAAA,iBAAAlD,GAAA+F,EAAA,SAAAqE,KAAAlH,EAAA6F,SAAA,OAAAyB,EAAAtH,EAAA6F,UAAA,WAAAqB,KAAAlH,EAAA8F,WAAA,OAAAwB,EAAAtH,EAAA8F,WAAA,SAAAhJ,GAAA,QAAAoK,KAAAlH,EAAA6F,SAAA,OAAAyB,EAAAtH,EAAA6F,UAAA,YAAAhD,EAAA,UAAAiC,MAAA,kDAAAoC,KAAAlH,EAAA8F,WAAA,OAAAwB,EAAAtH,EAAA8F,WAAA,KAAAR,OAAA,SAAA7E,EAAA5C,GAAA,QAAAqB,EAAA,KAAA8G,WAAAnK,OAAA,EAAAqD,GAAA,IAAAA,EAAA,KAAAqD,EAAA,KAAAyD,WAAA9G,GAAA,GAAAqD,EAAAqD,QAAA,KAAAsB,MAAAjH,EAAA0D,KAAApB,EAAA,oBAAA2E,KAAA3E,EAAAuD,WAAA,KAAA9F,EAAAuC,EAAA,OAAAvC,IAAA,UAAAS,GAAA,aAAAA,IAAAT,EAAA4F,QAAA/H,GAAAA,GAAAmC,EAAA8F,aAAA9F,EAAA,UAAA/C,EAAA+C,EAAAA,EAAAkG,WAAA,UAAAjJ,EAAAwG,KAAAhD,EAAAxD,EAAAyG,IAAA7F,EAAAmC,GAAA,KAAAgF,OAAA,YAAAS,KAAAzF,EAAA8F,WAAAhI,GAAA,KAAAyJ,SAAAtK,EAAA,EAAAsK,SAAA,SAAA9G,EAAA5C,GAAA,aAAA4C,EAAAgD,KAAA,MAAAhD,EAAAiD,IAAA,gBAAAjD,EAAAgD,MAAA,aAAAhD,EAAAgD,KAAA,KAAAgC,KAAAhF,EAAAiD,IAAA,WAAAjD,EAAAgD,MAAA,KAAA4D,KAAA,KAAA3D,IAAAjD,EAAAiD,IAAA,KAAAsB,OAAA,cAAAS,KAAA,kBAAAhF,EAAAgD,MAAA5F,IAAA,KAAA4H,KAAA5H,GAAAC,CAAA,EAAA0J,OAAA,SAAA/G,GAAA,QAAA5C,EAAA,KAAAmI,WAAAnK,OAAA,EAAAgC,GAAA,IAAAA,EAAA,KAAAqB,EAAA,KAAA8G,WAAAnI,GAAA,GAAAqB,EAAA4G,aAAArF,EAAA,YAAA8G,SAAArI,EAAAgH,WAAAhH,EAAA6G,UAAAE,EAAA/G,GAAApB,CAAA,kBAAA2C,GAAA,QAAA5C,EAAA,KAAAmI,WAAAnK,OAAA,EAAAgC,GAAA,IAAAA,EAAA,KAAAqB,EAAA,KAAA8G,WAAAnI,GAAA,GAAAqB,EAAA0G,SAAAnF,EAAA,KAAAR,EAAAf,EAAAgH,WAAA,aAAAjG,EAAAwD,KAAA,KAAAlB,EAAAtC,EAAAyD,IAAAuC,EAAA/G,EAAA,QAAAqD,CAAA,YAAAuC,MAAA,0BAAA2C,cAAA,SAAA5J,EAAAqB,EAAAe,GAAA,YAAAgF,SAAA,CAAAtC,SAAAwB,EAAAtG,GAAA2H,WAAAtG,EAAAwG,QAAAzF,GAAA,cAAA+E,SAAA,KAAAtB,IAAAjD,GAAA3C,CAAA,GAAAD,CAAA,UAAA6J,EAAAC,EAAAjD,EAAAkD,EAAAC,EAAAC,EAAAC,EAAArE,GAAA,QAAAsE,EAAAL,EAAAI,GAAArE,GAAAjB,EAAAuF,EAAAvF,KAAA,OAAAwF,GAAA,YAAAL,EAAAK,EAAA,CAAAD,EAAAjD,KAAAL,EAAAjC,GAAAqE,QAAApC,QAAAjC,GAAAmC,KAAAiD,EAAAC,EAAA,CAYA,IAAII,EAASC,EAAQ,KACVC,EAAcD,EAAQ,KAChBvJ,EAAWuJ,EAAQ,KAAvBE,GAKPC,GADmBH,EAAQ,KACdA,EAAQ,MAE3B7L,OAAOiM,QAAO,eArBdC,EAqBcC,GArBdD,EAqBcrG,IAAAsE,MAAG,SAAAiC,EAAgBC,EAASC,EAAQC,EAAQC,EAAOb,GAAK,OAAA9F,IAAAgB,MAAA,SAAA4F,GAAA,cAAAA,EAAA7B,KAAA6B,EAAAtD,MAAA,OACpE6C,EAAWU,UAAUf,GAAOrD,MAAK,SAAUqE,GACzC,IAAIC,EAAmBD,EAAWrL,KAAI,SAAUuL,GAC9C,MAAO,CACLC,aAAcD,EAAMC,aACpBC,SAAUF,EAAME,SAChBC,WAAYH,EAAMG,WAClBC,aAAcJ,EAAMI,aAExB,IACAC,QAAQnN,IAAI,gBAAiB,gBAC7B6M,EAAiBvH,SAAQ,SAAC9D,GACxB2L,QAAQvB,MAAM,SAAD5K,OAAUQ,EAAEuL,aAAY,YAAA/L,OAAWQ,EAAEwL,SAAQ,iBAAAhM,OAAgBQ,EAAEyL,WAAU,MAAAjM,OAAKQ,EAAE0L,cAC/F,GACF,IAAG,wBAAAR,EAAA3B,OAAA,GAAAsB,EAAA,IAnCL,eAAAe,EAAA,KAAAC,EAAAC,UAAA,WAAA7C,SAAA,SAAApC,EAAAkD,GAAA,IAAAD,EAAAa,EAAAvK,MAAAwL,EAAAC,GAAA,SAAA7B,EAAApF,GAAAiF,EAAAC,EAAAjD,EAAAkD,EAAAC,EAAAC,EAAA,OAAArF,EAAA,UAAAqF,EAAA8B,GAAAlC,EAAAC,EAAAjD,EAAAkD,EAAAC,EAAAC,EAAA,QAAA8B,EAAA,CAAA/B,OAAAgC,EAAA,MAoCC,gBAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,OAAAzB,EAAAxK,MAAA,KAAA0L,UAAA,EAfa,GAiBdrN,OAAO6N,kBAAoB,WACzBpO,OAAOqO,iBACL,cACA,SAAUC,GACJ,GAAKC,EAAAA,IAAQ,KACfC,EAAAA,EAAAA,MACa,IAATD,EAAAA,KACFE,EAAAA,EAAAA,IAAqBH,GAEV,IAATC,EAAAA,KACFG,EAAAA,EAAAA,IAAwBJ,GAEb,IAATC,EAAAA,KACFI,EAAAA,IAAQ,GACRC,EAAAA,EAAAA,IAAuBN,IAG7B,IACA,GAGFtO,OAAOqO,iBACL,aACA,SAAUC,GACK,IAATC,EAAAA,KACFM,EAAAA,EAAAA,IAAoBP,GAET,IAATC,EAAAA,KACFO,EAAAA,EAAAA,IAAuBR,GAEZ,IAATC,EAAAA,IAAcI,EAAAA,KAChBI,EAAAA,EAAAA,IAAsBT,EAE1B,IACA,GAGFtO,OAAOqO,iBACL,YACA,SAAUC,GACJ,GAAKC,EAAAA,IAAQ,KACfS,EAAAA,EAAAA,MACa,IAATT,EAAAA,KACFU,EAAAA,EAAAA,IAAmBX,GAER,IAATC,EAAAA,KACFW,EAAAA,EAAAA,IAAsBZ,GAEX,IAATC,EAAAA,IAAcI,EAAAA,MAChBQ,EAAAA,EAAAA,IAAqBb,GACrBK,EAAAA,IAAQ,IAGZS,aACF,IACA,GAGF7O,OAAO8N,iBAAiB,UAAU,WAChCgB,cACF,IAEAlD,EAAOmD,MAAM,0BAA2B,OAAQ,KAEhDrP,SAASsP,iBAAiB,sCAAsC3J,SAAQ,SAAC4J,GACvEA,EAAOnB,iBAAiB,SAAS,WAC/B,IAAIoB,EAAeC,SAASF,EAAOG,aAAa,MAChDC,YAAYH,EACd,GACF,IACAxP,SAASsP,iBAAiB,sCAAsC3J,SAAQ,SAAC4J,GACvEA,EAAOnB,iBAAiB,SAAS,WAC/B,IAAIoB,EAAeI,OAAOL,EAAOG,aAAa,MAC9CG,cAAcL,EAChB,GACF,IAEAxP,SAASoO,iBACP,YACA,SAAUC,GACRA,EAAMyB,gBACR,IACA,GAEFV,eACAW,eACAC,EAAAA,EAAAA,MAEAhQ,SAASC,cAAc,sCAAsCmO,iBAAiB,SAAS,YACrF6B,EAAAA,EAAAA,KACF,IAEAjQ,SAASC,cAAc,oCAAoCmO,iBAAiB,SAAS,YACnF8B,EAAAA,EAAAA,KACF,GACF,EAEA,QAAe5P,OAAwB","sources":["webpack://fabric/./src/fabric/canvas.ts","webpack://fabric/./src/fabric/history.ts","webpack://fabric/./src/fabric/index.ts","webpack://fabric/./src/fabric/svg.ts","webpack://fabric/./src/graph/coordinate.ts","webpack://fabric/./src/graph/path.ts","webpack://fabric/./src/index.ts"],"sourcesContent":["import { scale } from './index.ts';\nimport { pen_width_base } from '../tools/index.ts';\n\nexport function drawPath(ctx, pathData, color) {\n  var path = new Path2D(pathData);\n  ctx.lineCap = 'round';\n  ctx.lineWidth = pen_width_base * scale;\n  ctx.strokeStyle = color; // Red color\n  ctx.stroke(path); // Use fill() for filling the path instead of stroke()\n  ctx.closePath();\n}\n","import { saveContent, registration } from './index.ts';\n\nexport var change_history: { addition: any[]; deletion: any[] }[] = [];\nexport var history_offset: number = 0;\n\nexport function log_changes(addition, deletion) {\n  if (!(addition.length === 0 && deletion.length === 0)) {\n    change_history.push({\n      addition: addition,\n      deletion: deletion\n    });\n    history_offset = 0;\n  }\n}\n\nexport function replayHistory(m) {\n  if (m === 'redo') {\n    history_offset += 1;\n  }\n  var index = change_history.length - 1 + history_offset;\n  if (index > change_history.length - 1 || index < 0) {\n    if (m === 'redo') {\n      history_offset -= 1;\n    }\n    return '';\n  }\n  var prev = change_history[index] || { addition: [], deletion: [] };\n  var prev_addition = prev.addition;\n  var prev_deletion = prev.deletion;\n  var prev_addition_len = prev_addition.length;\n  var prev_deletion_len = prev_deletion.length;\n  var hidden_element_identifier = [];\n  var displayed_element_identifier = [];\n  for (var i = 0; i < prev_addition_len; i++) {\n    var k = prev_addition[i];\n    var target = document.querySelector('svg#vector_fabric g#' + k);\n    document.querySelector('svg#vector_fabric g#hidden_pen').appendChild(target);\n    target.removeAttributeNS(null, 'opacity');\n    hidden_element_identifier.push(k);\n    registration[k].hidden = true;\n  }\n  for (var i = 0; i < prev_deletion_len; i++) {\n    var k = prev_deletion[i];\n    var target = document.querySelector('svg#vector_fabric g#' + k);\n    document.querySelector('svg#vector_fabric g#pen').appendChild(target);\n\n    displayed_element_identifier.push(k);\n    registration[k].hidden = false;\n  }\n  change_history.splice(index, 1, { addition: displayed_element_identifier, deletion: hidden_element_identifier });\n  if (m === 'undo') {\n    history_offset -= 1;\n  }\n  saveContent();\n}\n","import { segmentsToPath, simplifyPath, pathCommandToCoordinates } from '../graph/path.ts';\nimport { touchData, touchData_a, touchData_b, pen_color, tole } from '../tools/index.ts';\nimport { currentPath } from '../tools/index.ts';\nimport { localforage } from '../index.ts';\n\nexport let canvas = document.querySelector('#fabric');\nexport let ctx = canvas.getContext('2d');\nexport let svg_canvas = document.querySelector('#vector_fabric');\nexport let svg_canvas_pen_layer = document.querySelector('#vector_fabric g#pen');\nexport var scale = Math.log(window.devicePixelRatio) / Math.log(Math.pow(2, 0.4));\nexport var width = window.innerWidth;\nexport var height = window.innerHeight;\nexport var registration: object = {};\n\nexport function resizeFabric() {\n  width = window.innerWidth;\n  height = window.innerHeight;\n  canvas.width = width * scale;\n  canvas.height = height * scale;\n  svg_canvas.setAttributeNS(null, 'width', width + 'px');\n  svg_canvas.setAttributeNS(null, 'height', height + 'px');\n  svg_canvas.setAttributeNS(null, 'viewbox', `0,0,${width},${height}`);\n  canvas.style.background = 'none';\n}\n\nexport function updatePenPath() {\n  currentPath.c = segmentsToPath(touchData, 1);\n  currentPath.a = segmentsToPath(simplifyPath(touchData_a, tole).concat(touchData_a[touchData_a.length - 1]), 1);\n  currentPath.b = segmentsToPath(simplifyPath(touchData_b, tole).concat(touchData_b[touchData_b.length - 1]), 1);\n}\n\nexport function registerElement(coordinates, id) {\n  var x = coordinates.map((e) => e.x);\n  var y = coordinates.map((e) => e.y);\n  registration[id] = {\n    x1: Math.min(...x),\n    y1: Math.min(...y),\n    x2: Math.max(...x),\n    y2: Math.max(...y),\n    points: coordinates,\n    id: id,\n    hidden: false\n  };\n}\n\nexport function saveContent() {\n  localforage\n    .setItem('fabric', String(document.querySelector('svg#vector_fabric g#pen').innerHTML))\n    .then(function () {})\n    .catch(function (err) {\n      // we got an error\n    });\n}\n\nexport function loadContent() {\n  localforage\n    .getItem('fabric')\n    .then(function (value) {\n      document.querySelector('svg#vector_fabric g#pen').innerHTML = value;\n      var elements = document.querySelectorAll('svg#vector_fabric g#pen g');\n      var elements_length = elements.length;\n      for (var i = 0; i < elements_length; i++) {\n        var e = elements[i];\n        var coordinates = [];\n        for (var child of e.children) {\n          if (child.tagName.toLowerCase() === 'path') {\n            coordinates = coordinates.concat(pathCommandToCoordinates(child.getAttribute('d'), 2));\n          }\n          if (child.tagName.toLowerCase() === 'circle') {\n            coordinates = coordinates.concat([{ x: child.getAttribute('cx'), y: child.getAttribute('cy') }]);\n          }\n        }\n        registerElement(coordinates, e.getAttribute('id'));\n      }\n    })\n    .catch(function (err) {\n      // we got an error\n    });\n}\n","import { uuidv4 } from '../index.ts';\nimport { svg_canvas_pen_layer } from './index.ts';\nimport { pen_width_base } from '../tools/index.ts';\n\nexport function newGroupOnSVG() {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  var id = 'g-' + uuidv4();\n  p.setAttributeNS(null, 'id', id);\n  //p.setAttributeNS(null, 'opacity', '0.5');\n  svg_canvas_pen_layer.appendChild(p);\n  return id;\n}\n\nexport function drawPathOnSVG(pathData, color, container) {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  p.setAttributeNS(null, 'd', pathData);\n  p.setAttributeNS(null, 'stroke-width', pen_width_base);\n  p.setAttributeNS(null, 'stroke', color);\n  p.setAttributeNS(null, 'fill', 'none');\n  p.setAttributeNS(null, 'stroke-linecap', 'round');\n  p.setAttributeNS(null, 'fill-rule', 'nonzero');\n  p.setAttributeNS(null, 'id', uuidv4());\n  container = document.querySelector('#' + container) || svg_canvas_pen_layer;\n  container.appendChild(p);\n}\n\nexport function drawCircleOnSVG(x, y, r, color, container) {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n  p.setAttributeNS(null, 'cx', x);\n  p.setAttributeNS(null, 'cy', y);\n  p.setAttributeNS(null, 'r', r);\n  p.setAttributeNS(null, 'stroke', 'none');\n  p.setAttributeNS(null, 'fill', color);\n  p.setAttributeNS(null, 'stroke-linecap', 'round');\n  p.setAttributeNS(null, 'fill-rule', 'nonzero');\n  p.setAttributeNS(null, 'id', uuidv4());\n  container = document.querySelector('#' + container) || svg_canvas_pen_layer;\n  container.appendChild(p);\n}\n","export function getCoordinateOnCircleBorder(centerX, centerY, radius, radian) {\n  var xe = 1;\n  var ye = 1;\n  var x = parseFloat((centerX + Math.cos(radian) * radius).toFixed(10));\n  var y = parseFloat((centerY + Math.sin(radian) * radius).toFixed(10));\n  var degree = radian * (180 / Math.PI);\n  return { x, y, radian, degree, radius };\n}\n","export function segmentsToPath(segments, scale) {\n  if (segments.length < 1) {\n    return '';\n  }\n  var pathCommand = `M${segments[0].x * scale},${segments[0].y * scale}`;\n  for (var i = 1; i < segments.length - 1; i++) {\n    var c = segments[i];\n    var n = segments[i + 1] || c;\n\n    pathCommand += `Q${c.x * scale},${c.y * scale},${(c.x * scale + n.x * scale) / 2},${(c.y * scale + n.y * scale) / 2}`;\n  }\n  return pathCommand;\n}\n\nexport function distanceToSegment(point, start, end) {\n  var dx = end.x - start.x;\n  var dy = end.y - start.y;\n  var d = dx * dx + dy * dy;\n  var t = ((point.x - start.x) * dx + (point.y - start.y) * dy) / d;\n\n  if (t < 0) {\n    dx = point.x - start.x;\n    dy = point.y - start.y;\n  } else if (t > 1) {\n    dx = point.x - end.x;\n    dy = point.y - end.y;\n  } else {\n    var closestPoint = { x: start.x + t * dx, y: start.y + t * dy };\n    dx = point.x - closestPoint.x;\n    dy = point.y - closestPoint.y;\n  }\n\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function simplifyPath(points, tolerance) {\n  if (points.length < 3) {\n    return points;\n  }\n\n  var dmax = 0;\n  var index = 0;\n\n  // Find the point with the maximum distance\n  for (var i = 1; i < points.length - 1; i++) {\n    var d = distanceToSegment(points[i], points[0], points[points.length - 1]);\n    if (d > dmax) {\n      index = i;\n      dmax = d;\n    }\n  }\n\n  // If max distance is greater than tolerance, split the curve\n  if (dmax > tolerance) {\n    var leftPoints = points.slice(0, index + 1);\n    var rightPoints = points.slice(index);\n    var simplifiedLeft = simplifyPath(leftPoints, tolerance);\n    var simplifiedRight = simplifyPath(rightPoints, tolerance);\n    return simplifiedLeft.slice(0, simplifiedLeft.length - 1).concat(simplifiedRight);\n  } else {\n    return [points[0], points[points.length - 1]];\n  }\n}\n\nexport function pathCommandToCoordinates(str, precision) {\n  var points = [];\n  var regex = /((m|M)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(l|L)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(h|H)\\s{0,1}([0-9\\.\\-]*)|(v|V)\\s{0,1}([0-9\\.\\-]*)|(c|C)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(s|S)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(q|Q)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(t|T)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(Z|z))/gm;\n  var m = regex.exec(str)\n  while ((m = regex.exec(str)) !== null) {\n    // This is necessary to avoid infinite loops with zero-width matches\n    if (m.index === regex.lastIndex) {\n      regex.lastIndex++;\n    }\n    // The result can be accessed through the `m`-variable.\n    m.forEach((match, groupIndex) => {\n      if (match === 'M') {\n        var x = parseFloat(m[groupIndex + 1]);\n        var y = parseFloat(m[groupIndex + 3]);\n        points.push({ x, y });\n      }\n      if (match === 'L') {\n        var x = parseFloat(m[groupIndex + 1]);\n        var y = parseFloat(m[groupIndex + 3]);\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pX + (x - pX) * (h / (distance / precision));\n            var b = pY + (y - pY) * (h / (distance / precision));\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'H') {\n        var x = m[groupIndex + 1];\n        var y = 0;\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.abs(x - pX);\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pX + (x - pX) * (h / (distance / precision));\n            points.push({ x: a, y: pY });\n          }\n        }\n      }\n      if (match === 'V') {\n        var x = 0;\n        var y = m[groupIndex + 1];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.abs(y - pY);\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pY + (y - pY) * (h / (distance / precision));\n            points.push({ x: pX, y: a });\n          }\n        }\n      }\n      if (match === 'C') {\n        var x1 = m[groupIndex + 1];\n        var y1 = m[groupIndex + 3];\n        var x2 = m[groupIndex + 4];\n        var y2 = m[groupIndex + 6];\n        var x = m[groupIndex + 7];\n        var y = m[groupIndex + 9];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 3) * pX + 3 * Math.pow(1 - t, 2) * t * x1 + 3 * (1 - t) * Math.pow(t, 2) * x2 + Math.pow(t, 3) * x;\n            var b = Math.pow(1 - t, 3) * pY + 3 * Math.pow(1 - t, 2) * t * y1 + 3 * (1 - t) * Math.pow(t, 2) * y2 + Math.pow(t, 3) * y;\n\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'S') {\n        var x2 = m[groupIndex + 1];\n        var y2 = m[groupIndex + 3];\n        var x = m[groupIndex + 4];\n        var y = m[groupIndex + 6];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 3) * pX + 3 * Math.pow(1 - t, 2) * t * (2 * pX - x2) + 3 * (1 - t) * Math.pow(t, 2) * x2 + Math.pow(t, 3) * x;\n            var b = Math.pow(1 - t, 3) * pY + 3 * Math.pow(1 - t, 2) * t * (2 * pY - y2) + 3 * (1 - t) * Math.pow(t, 2) * y2 + Math.pow(t, 3) * y;\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'Q') {\n        var x1 = parseFloat(m[groupIndex + 1]);\n        var y1 = parseFloat(m[groupIndex + 3]);\n        var x = parseFloat(m[groupIndex + 4]);\n        var y = parseFloat(m[groupIndex + 6]);\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 2) * pX + 2 * (1 - t) * t * x1 + Math.pow(t, 2) * x;\n            var b = Math.pow(1 - t, 2) * pY + 2 * (1 - t) * t * y1 + Math.pow(t, 2) * y;\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'T') {\n        var x = m[groupIndex + 1];\n        var y = m[groupIndex + 3];\n      }\n      if (!(match === undefined)) {\n        // console.log(`Found match, group ${groupIndex}: ${match}`);\n      }\n    });\n  }\n  return points;\n}\n","import { mode, mover } from './tools/index.ts';\nimport { handleTouchStart_eraser, handleTouchMove_eraser, handleTouchEnd_eraser } from './tools/eraser.ts';\nimport { handleTouchStart_pen, handleTouchMove_pen, handleTouchEnd_pen } from './tools/pen.ts';\nimport { handleTouchStart_mover, handleTouchMove_mover, handleTouchEnd_mover } from './tools/mover.ts';\n\nimport { supportsPassive, wheelOpt, wheelEvent, checkPassive, disableScroll, enableScroll } from './scroll/index.ts';\n\nimport { setFabricColor, deleteFabricColor, initializeFabricColors, listFabricColors, setPenColor, updateFabricColorStyleTag, colorToHex, colorToCSS } from './tools/color.ts';\n\nimport { openColorPlate, closeColorPlate } from './tools/color-plate.ts';\n\nimport './fabric/index.css';\n\nvar ripple = require('@erichsia7/ripple');\nexport var localforage = require('localforage');\nexport var { v4: uuidv4 } = require('uuid');\n\n//for development\n\nconst ErrorStackParser = require('error-stack-parser');\nconst StackTrace = require('stacktrace-js');\n\nwindow.onerror = async function (message, source, lineno, colno, error) {\n  StackTrace.fromError(error).then(function (stackTrace) {\n    var parsedStackTrace = stackTrace.map(function (frame) {\n      return {\n        functionName: frame.functionName,\n        fileName: frame.fileName,\n        lineNumber: frame.lineNumber,\n        columnNumber: frame.columnNumber\n      };\n    });\n    console.log('%c ----------', 'color: #888;');\n    parsedStackTrace.forEach((e) => {\n      console.error(`func: ${e.functionName}\\npath: ${e.fileName}\\nlocation: L${e.lineNumber} C${e.columnNumber}`);\n    });\n  });\n};\n\nwindow.fabric_initialize = function () {\n  canvas.addEventListener(\n    'touchstart',\n    function (event) {\n      if (0 <= mode <= 2) {\n        disableScroll();\n        if (mode === 0) {\n          handleTouchStart_pen(event);\n        }\n        if (mode === 1) {\n          handleTouchStart_eraser(event);\n        }\n        if (mode === 2) {\n          mover = true;\n          handleTouchStart_mover(event);\n        }\n      }\n    },\n    false\n  );\n\n  canvas.addEventListener(\n    'touchmove',\n    function (event) {\n      if (mode === 0) {\n        handleTouchMove_pen(event);\n      }\n      if (mode === 1) {\n        handleTouchMove_eraser(event);\n      }\n      if (mode === 2 && mover) {\n        handleTouchMove_mover(event);\n      }\n    },\n    false\n  );\n\n  canvas.addEventListener(\n    'touchend',\n    function (event) {\n      if (0 <= mode <= 2) {\n        enableScroll();\n        if (mode === 0) {\n          handleTouchEnd_pen(event);\n        }\n        if (mode === 1) {\n          handleTouchEnd_eraser(event);\n        }\n        if (mode === 2 && mover) {\n          handleTouchEnd_mover(event);\n          mover = false;\n        }\n      }\n      saveContent();\n    },\n    false\n  );\n\n  window.addEventListener('resize', function () {\n    resizeFabric();\n  });\n\n  ripple.addTo('.tools_container button', '#000', 370);\n\n  document.querySelectorAll('.tools_container button[group=\"1\"]').forEach((button) => {\n    button.addEventListener('click', function () {\n      var selectedMode = parseInt(button.getAttribute('m'));\n      setToolMode(selectedMode);\n    });\n  });\n  document.querySelectorAll('.tools_container button[group=\"0\"]').forEach((button) => {\n    button.addEventListener('click', function () {\n      var selectedMode = String(button.getAttribute('m'));\n      replayHistory(selectedMode);\n    });\n  });\n\n  document.addEventListener(\n    'dblclick',\n    function (event) {\n      event.preventDefault();\n    },\n    false\n  );\n  resizeFabric();\n  loadContent();\n  checkPassive();\n\n  document.querySelector('.tools_container button[group=\"2\"]').addEventListener('click', function () {\n    openColorPlate();\n  });\n\n  document.querySelector('.fabric_color_plate_close button').addEventListener('click', function () {\n    closeColorPlate();\n  });\n};\n\nexport default window.fabric_initialize;\n"],"names":["drawPath","ctx","pathData","color","path","Path2D","lineCap","lineWidth","pen_width_base","scale","strokeStyle","stroke","closePath","change_history","log_changes","addition","deletion","length","push","canvas","document","querySelector","getContext","svg_canvas_pen_layer","Math","log","window","devicePixelRatio","pow","registration","innerWidth","innerHeight","updatePenPath","currentPath","c","segmentsToPath","touchData","a","simplifyPath","touchData_a","tole","concat","b","touchData_b","registerElement","coordinates","id","x","map","e","y","x1","min","apply","_toConsumableArray","y1","x2","max","y2","points","hidden","newGroupOnSVG","p","createElementNS","uuidv4","setAttributeNS","appendChild","drawPathOnSVG","container","drawCircleOnSVG","r","getCoordinateOnCircleBorder","centerX","centerY","radius","radian","parseFloat","cos","toFixed","sin","degree","PI","segments","pathCommand","i","n","distanceToSegment","point","start","end","dx","dy","d","t","closestPoint","sqrt","tolerance","dmax","index","leftPoints","slice","rightPoints","simplifiedLeft","simplifiedRight","pathCommandToCoordinates","str","precision","regex","m","exec","lastIndex","forEach","match","groupIndex","pX","pY","distance","h","abs","_regeneratorRuntime","Object","prototype","hasOwnProperty","o","defineProperty","value","Symbol","iterator","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","l","f","s","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","ripple","require","localforage","v4","StackTrace","onerror","fn","_ref","_callee","message","source","lineno","colno","_context","fromError","stackTrace","parsedStackTrace","frame","functionName","fileName","lineNumber","columnNumber","console","self","args","arguments","err","undefined","_x","_x2","_x3","_x4","_x5","fabric_initialize","addEventListener","event","mode","disableScroll","handleTouchStart_pen","handleTouchStart_eraser","mover","handleTouchStart_mover","handleTouchMove_pen","handleTouchMove_eraser","handleTouchMove_mover","enableScroll","handleTouchEnd_pen","handleTouchEnd_eraser","handleTouchEnd_mover","saveContent","resizeFabric","addTo","querySelectorAll","button","selectedMode","parseInt","getAttribute","setToolMode","String","replayHistory","preventDefault","loadContent","checkPassive","openColorPlate","closeColorPlate"],"sourceRoot":""}