{"version":3,"file":"main-102ff935.a7f72ad17052a4c09a4c.min.js","mappings":"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","sources":["webpack://fabric/./src/tools/index.ts","webpack://fabric/./src/graph/path.ts","webpack://fabric/./src/fabric/index.ts","webpack://fabric/./src/fabric/history.ts","webpack://fabric/./src/graph/coordinate.ts","webpack://fabric/./src/fabric/svg.ts","webpack://fabric/./src/fabric/canvas.ts","webpack://fabric/./src/tools/pen.ts","webpack://fabric/./src/scroll/index.ts","webpack://fabric/./src/index.ts","webpack://fabric/./src/tools/eraser.ts","webpack://fabric/./src/tools/mover.ts"],"sourcesContent":["export var mode: number = 0;\n\nexport var mover: boolean = false;\nexport var move_start_x: number = 0;\nexport var move_start_y: number = 0;\nexport var move_end_x: number = 0;\nexport var move_end_y: number = 0;\nexport var move_offset_x: number = 0;\nexport var move_offset_y: number = 0;\nexport var offsetX: number = 0;\nexport var offsetY: number = 0;\n\nexport var touchData: Array = [];\nexport var touchData_a: Array = [];\nexport var touchData_b: Array = [];\nexport var start_timestamp: number = 0;\nexport var touch_point_identifier: number = 0;\n\nexport var pen_width_base: number = 4;\nexport var force_weight: number = 0;\nexport var speed_weight: number = -0.7;\nexport var pen_color: string = '#000000';\nexport var pen_color_id: string = 'fc-default-black-white';\nexport var tole: number = Math.min(Math.log(pen_width_base) / Math.log(Math.pow(10, 0.88)), 0.7);\n\nexport var currentPath: object = { a: '', b: '', c: '' };\nexport var eraser_selected_element: object = {};\nexport var eraser_hidden_element: object = {};\nexport var eraser_d = 15;\nexport var eraser_color = '#888888';\n\nexport function setToolMode(m) {\n  mode = m;\n  function getSelector(m) {\n    return document.querySelector(`.tools_container button[m=\"${m}\"] span`);\n  }\n  for (var i = 0; i < 3; i++) {\n    getSelector(i).classList.remove('filled');\n  }\n  getSelector(m).classList.add('filled');\n}\n","export function segmentsToPath(segments, scale) {\n  if (segments.length < 1) {\n    return '';\n  }\n  var pathCommand = `M${segments[0].x * scale},${segments[0].y * scale}`;\n  for (var i = 1; i < segments.length - 1; i++) {\n    var c = segments[i];\n    var n = segments[i + 1] || c;\n\n    pathCommand += `Q${c.x * scale},${c.y * scale},${(c.x * scale + n.x * scale) / 2},${(c.y * scale + n.y * scale) / 2}`;\n  }\n  return pathCommand;\n}\n\nexport function distanceToSegment(point, start, end) {\n  var dx = end.x - start.x;\n  var dy = end.y - start.y;\n  var d = dx * dx + dy * dy;\n  var t = ((point.x - start.x) * dx + (point.y - start.y) * dy) / d;\n\n  if (t < 0) {\n    dx = point.x - start.x;\n    dy = point.y - start.y;\n  } else if (t > 1) {\n    dx = point.x - end.x;\n    dy = point.y - end.y;\n  } else {\n    var closestPoint = { x: start.x + t * dx, y: start.y + t * dy };\n    dx = point.x - closestPoint.x;\n    dy = point.y - closestPoint.y;\n  }\n\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function simplifyPath(points, tolerance) {\n  if (points.length < 3) {\n    return points;\n  }\n\n  var dmax = 0;\n  var index = 0;\n\n  // Find the point with the maximum distance\n  for (var i = 1; i < points.length - 1; i++) {\n    var d = distanceToSegment(points[i], points[0], points[points.length - 1]);\n    if (d > dmax) {\n      index = i;\n      dmax = d;\n    }\n  }\n\n  // If max distance is greater than tolerance, split the curve\n  if (dmax > tolerance) {\n    var leftPoints = points.slice(0, index + 1);\n    var rightPoints = points.slice(index);\n    var simplifiedLeft = simplifyPath(leftPoints, tolerance);\n    var simplifiedRight = simplifyPath(rightPoints, tolerance);\n    return simplifiedLeft.slice(0, simplifiedLeft.length - 1).concat(simplifiedRight);\n  } else {\n    return [points[0], points[points.length - 1]];\n  }\n}\n\nexport function pathCommandToCoordinates(str, precision) {\n  var points = [];\n  var regex = /((m|M)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(l|L)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(h|H)\\s{0,1}([0-9\\.\\-]*)|(v|V)\\s{0,1}([0-9\\.\\-]*)|(c|C)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(s|S)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(q|Q)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)[\\,\\s]{1,2}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(t|T)\\s{0,1}([0-9\\.\\-]*)(\\s|\\,)([0-9\\.\\-]*)|(Z|z))/gm;\n  var m = regex.exec(str)\n  while ((m = regex.exec(str)) !== null) {\n    // This is necessary to avoid infinite loops with zero-width matches\n    if (m.index === regex.lastIndex) {\n      regex.lastIndex++;\n    }\n    // The result can be accessed through the `m`-variable.\n    m.forEach((match, groupIndex) => {\n      if (match === 'M') {\n        var x = parseFloat(m[groupIndex + 1]);\n        var y = parseFloat(m[groupIndex + 3]);\n        points.push({ x, y });\n      }\n      if (match === 'L') {\n        var x = parseFloat(m[groupIndex + 1]);\n        var y = parseFloat(m[groupIndex + 3]);\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pX + (x - pX) * (h / (distance / precision));\n            var b = pY + (y - pY) * (h / (distance / precision));\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'H') {\n        var x = m[groupIndex + 1];\n        var y = 0;\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.abs(x - pX);\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pX + (x - pX) * (h / (distance / precision));\n            points.push({ x: a, y: pY });\n          }\n        }\n      }\n      if (match === 'V') {\n        var x = 0;\n        var y = m[groupIndex + 1];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.abs(y - pY);\n          for (var h = 0; h < distance / precision; h++) {\n            var a = pY + (y - pY) * (h / (distance / precision));\n            points.push({ x: pX, y: a });\n          }\n        }\n      }\n      if (match === 'C') {\n        var x1 = m[groupIndex + 1];\n        var y1 = m[groupIndex + 3];\n        var x2 = m[groupIndex + 4];\n        var y2 = m[groupIndex + 6];\n        var x = m[groupIndex + 7];\n        var y = m[groupIndex + 9];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 3) * pX + 3 * Math.pow(1 - t, 2) * t * x1 + 3 * (1 - t) * Math.pow(t, 2) * x2 + Math.pow(t, 3) * x;\n            var b = Math.pow(1 - t, 3) * pY + 3 * Math.pow(1 - t, 2) * t * y1 + 3 * (1 - t) * Math.pow(t, 2) * y2 + Math.pow(t, 3) * y;\n\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'S') {\n        var x2 = m[groupIndex + 1];\n        var y2 = m[groupIndex + 3];\n        var x = m[groupIndex + 4];\n        var y = m[groupIndex + 6];\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 3) * pX + 3 * Math.pow(1 - t, 2) * t * (2 * pX - x2) + 3 * (1 - t) * Math.pow(t, 2) * x2 + Math.pow(t, 3) * x;\n            var b = Math.pow(1 - t, 3) * pY + 3 * Math.pow(1 - t, 2) * t * (2 * pY - y2) + 3 * (1 - t) * Math.pow(t, 2) * y2 + Math.pow(t, 3) * y;\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'Q') {\n        var x1 = parseFloat(m[groupIndex + 1]);\n        var y1 = parseFloat(m[groupIndex + 3]);\n        var x = parseFloat(m[groupIndex + 4]);\n        var y = parseFloat(m[groupIndex + 6]);\n        var p = points[points.length - 1] || { x: null, y: null };\n        var pX = p.x;\n        var pY = p.y;\n        if (pX === null || pY === null) {\n          points.push({ x, y });\n        } else {\n          var distance = Math.sqrt(Math.pow(x - pX, 2) + Math.pow(y - pY, 2));\n          for (var h = 0; h < distance / precision; h++) {\n            var t = Math.min(Math.max(h / (distance / precision), 0), 1);\n            var a = Math.pow(1 - t, 2) * pX + 2 * (1 - t) * t * x1 + Math.pow(t, 2) * x;\n            var b = Math.pow(1 - t, 2) * pY + 2 * (1 - t) * t * y1 + Math.pow(t, 2) * y;\n            points.push({ x: a, y: b });\n          }\n        }\n      }\n      if (match === 'T') {\n        var x = m[groupIndex + 1];\n        var y = m[groupIndex + 3];\n      }\n      if (!(match === undefined)) {\n        // console.log(`Found match, group ${groupIndex}: ${match}`);\n      }\n    });\n  }\n  return points;\n}\n","import { segmentsToPath, simplifyPath, pathCommandToCoordinates } from '../graph/path.ts';\nimport { touchData, touchData_a, touchData_b, pen_color, tole } from '../tools/index.ts';\nimport { currentPath } from '../tools/index.ts';\nimport { localforage } from '../index.ts';\n\nexport let canvas = document.querySelector('#fabric');\nexport let ctx = canvas.getContext('2d');\nexport let svg_canvas = document.querySelector('#vector_fabric');\nexport let svg_canvas_pen_layer = document.querySelector('#vector_fabric g#pen');\nexport var scale = Math.log(window.devicePixelRatio) / Math.log(Math.pow(2, 0.4));\nexport var width = window.innerWidth;\nexport var height = window.innerHeight;\nexport var registration: object = {};\n\nexport function resizeFabric() {\n  width = window.innerWidth;\n  height = window.innerHeight;\n  canvas.width = width * scale;\n  canvas.height = height * scale;\n  svg_canvas.setAttributeNS(null, 'width', width + 'px');\n  svg_canvas.setAttributeNS(null, 'height', height + 'px');\n  svg_canvas.setAttributeNS(null, 'viewbox', `0,0,${width},${height}`);\n  canvas.style.background = 'none';\n}\n\nexport function updatePenPath() {\n  currentPath.c = segmentsToPath(touchData, 1);\n  currentPath.a = segmentsToPath(simplifyPath(touchData_a, tole).concat(touchData_a[touchData_a.length - 1]), 1);\n  currentPath.b = segmentsToPath(simplifyPath(touchData_b, tole).concat(touchData_b[touchData_b.length - 1]), 1);\n}\n\nexport function registerElement(coordinates, id) {\n  var x = coordinates.map((e) => e.x);\n  var y = coordinates.map((e) => e.y);\n  registration[id] = {\n    x1: Math.min(...x),\n    y1: Math.min(...y),\n    x2: Math.max(...x),\n    y2: Math.max(...y),\n    points: coordinates,\n    id: id,\n    hidden: false\n  };\n}\n\nexport function saveContent() {\n  localforage\n    .setItem('fabric', String(document.querySelector('svg#vector_fabric g#pen').innerHTML))\n    .then(function () {})\n    .catch(function (err) {\n      // we got an error\n    });\n}\n\nexport function loadContent() {\n  localforage\n    .getItem('fabric')\n    .then(function (value) {\n      document.querySelector('svg#vector_fabric g#pen').innerHTML = value;\n      var elements = document.querySelectorAll('svg#vector_fabric g#pen g');\n      var elements_length = elements.length;\n      for (var i = 0; i < elements_length; i++) {\n        var e = elements[i];\n        var coordinates = [];\n        for (var child of e.children) {\n          if (child.tagName.toLowerCase() === 'path') {\n            coordinates = coordinates.concat(pathCommandToCoordinates(child.getAttribute('d'), 2));\n          }\n          if (child.tagName.toLowerCase() === 'circle') {\n            coordinates = coordinates.concat([{ x: child.getAttribute('cx'), y: child.getAttribute('cy') }]);\n          }\n        }\n        registerElement(coordinates, e.getAttribute('id'));\n      }\n    })\n    .catch(function (err) {\n      // we got an error\n    });\n}\n","import { saveContent, registration } from './index.ts';\n\nexport var change_history: { addition: any[]; deletion: any[] }[] = [];\nexport var history_offset: number = 0;\n\nexport function log_changes(addition, deletion) {\n  if (!(addition.length === 0 && deletion.length === 0)) {\n    change_history.push({\n      addition: addition,\n      deletion: deletion\n    });\n    history_offset = 0;\n  }\n}\n\nexport function replayHistory(m) {\n  if (m === 'redo') {\n    history_offset += 1;\n  }\n  var index = change_history.length - 1 + history_offset;\n  if (index > change_history.length - 1 || index < 0) {\n    if (m === 'redo') {\n      history_offset -= 1;\n    }\n    return '';\n  }\n  var prev = change_history[index] || { addition: [], deletion: [] };\n  var prev_addition = prev.addition;\n  var prev_deletion = prev.deletion;\n  var prev_addition_len = prev_addition.length;\n  var prev_deletion_len = prev_deletion.length;\n  var hidden_element_identifier = [];\n  var displayed_element_identifier = [];\n  for (var i = 0; i < prev_addition_len; i++) {\n    var k = prev_addition[i];\n    var target = document.querySelector('svg#vector_fabric g#' + k);\n    document.querySelector('svg#vector_fabric g#hidden_pen').appendChild(target);\n    target.removeAttributeNS(null, 'opacity');\n    hidden_element_identifier.push(k);\n    registration[k].hidden = true;\n  }\n  for (var i = 0; i < prev_deletion_len; i++) {\n    var k = prev_deletion[i];\n    var target = document.querySelector('svg#vector_fabric g#' + k);\n    document.querySelector('svg#vector_fabric g#pen').appendChild(target);\n\n    displayed_element_identifier.push(k);\n    registration[k].hidden = false;\n  }\n  change_history.splice(index, 1, { addition: displayed_element_identifier, deletion: hidden_element_identifier });\n  if (m === 'undo') {\n    history_offset -= 1;\n  }\n  saveContent();\n}\n","export function getCoordinateOnCircleBorder(centerX, centerY, radius, radian) {\n  var xe = 1;\n  var ye = 1;\n  var x = parseFloat((centerX + Math.cos(radian) * radius).toFixed(10));\n  var y = parseFloat((centerY + Math.sin(radian) * radius).toFixed(10));\n  var degree = radian * (180 / Math.PI);\n  return { x, y, radian, degree, radius };\n}\n","import { uuidv4 } from '../index.ts';\nimport { svg_canvas_pen_layer } from './index.ts';\nimport { pen_width_base } from '../tools/index.ts';\n\nexport function newGroupOnSVG() {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  var id = 'g-' + uuidv4();\n  p.setAttributeNS(null, 'id', id);\n  //p.setAttributeNS(null, 'opacity', '0.5');\n  svg_canvas_pen_layer.appendChild(p);\n  return id;\n}\n\nexport function drawPathOnSVG(pathData, color, container) {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  p.setAttributeNS(null, 'd', pathData);\n  p.setAttributeNS(null, 'stroke-width', pen_width_base);\n  p.setAttributeNS(null, 'stroke', color);\n  p.setAttributeNS(null, 'fill', 'none');\n  p.setAttributeNS(null, 'stroke-linecap', 'round');\n  p.setAttributeNS(null, 'fill-rule', 'nonzero');\n  p.setAttributeNS(null, 'id', uuidv4());\n  container = document.querySelector('#' + container) || svg_canvas_pen_layer;\n  container.appendChild(p);\n}\n\nexport function drawCircleOnSVG(x, y, r, color, container) {\n  var p = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n  p.setAttributeNS(null, 'cx', x);\n  p.setAttributeNS(null, 'cy', y);\n  p.setAttributeNS(null, 'r', r);\n  p.setAttributeNS(null, 'stroke', 'none');\n  p.setAttributeNS(null, 'fill', color);\n  p.setAttributeNS(null, 'stroke-linecap', 'round');\n  p.setAttributeNS(null, 'fill-rule', 'nonzero');\n  p.setAttributeNS(null, 'id', uuidv4());\n  container = document.querySelector('#' + container) || svg_canvas_pen_layer;\n  container.appendChild(p);\n}\n","import { scale } from './index.ts';\nimport { pen_width_base } from '../tools/index.ts';\n\nexport function drawPath(ctx, pathData, color) {\n  var path = new Path2D(pathData);\n  ctx.lineCap = 'round';\n  ctx.lineWidth = pen_width_base * scale;\n  ctx.strokeStyle = color; // Red color\n  ctx.stroke(path); // Use fill() for filling the path instead of stroke()\n  ctx.closePath();\n}\n","import { getCoordinateOnCircleBorder } from '../graph/coordinate.ts';\nimport { segmentsToPath, simplifyPath, pathCommandToCoordinates } from '../graph/path.ts';\nimport { newGroupOnSVG, drawPathOnSVG, drawCircleOnSVG } from '../fabric/svg.ts';\nimport { log_changes } from '../fabric/history.ts';\nimport { registerElement, updatePenPath, canvas, ctx, scale } from '../fabric/index.ts';\nimport { mode, mover, move_start_x, move_start_y, move_end_x, move_end_y, move_offset_x, move_offset_y, offsetX, offsetY, touchData, touchData_a, touchData_b, start_timestamp, touch_point_identifier, pen_width_base, force_weight, speed_weight, pen_color, tole, currentPath, eraser_selected_element, eraser_hidden_element, eraser_d, eraser_color, setToolMode } from './index.ts';\nimport { drawPath } from '../fabric/canvas.ts';\n\nexport function handleTouchStart_pen(event) {\n    var touch = event.touches[0];\n    touchData = [];\n    touchData_a = [];\n    touchData_b = [];\n    touch_point_identifier = touch.identifier;\n\n    if (touch.force) {\n      force_weight = 0.5;\n      speed_weight = -0.2;\n    } else {\n      force_weight = 0.1;\n      speed_weight = 0.2;\n    }\n    //ctx.clearRect(0, 0, window.innerWidth * scale, window.innerHeight * scale);\n\n    touchData.push({\n      x: touch.clientX - offsetX,\n      y: touch.clientY - offsetY,\n      force: touch.force || 0, // Get force (if available, otherwise default to 0)\n      time_stamp: new Date().getTime(),\n      angle: 0\n      // Get timestamp\n    });\n\n    touchData_a.push({\n      x: touch.clientX - offsetX,\n      y: touch.clientY - offsetY\n    });\n    touchData_b.push({\n      x: touch.clientX - offsetX,\n      y: touch.clientY - offsetY\n    });\n    var current = touchData[touchData.length - 1];\n    ctx.beginPath();\n\n    // Draw a circle\n    ctx.arc(current.x * scale, current.y * scale, pen_width_base * 0.5 * scale, 0, 2 * Math.PI);\n    ctx.fillStyle = pen_color;\n    // Fill the circle with color\n    ctx.fill();\n    // Finish drawing\n    ctx.closePath();\n}\n\n//export function to handle touch move event\nexport function handleTouchMove_pen(event) {\n  var touches = [];\n  for (var t in event.touches) {\n    if (event.touches.hasOwnProperty(t) && typeof event.touches[t] === 'object') {\n      touches.push(event.touches[t]);\n    }\n  }\n\n  var touch = touches.filter((p) => p.identifier === touch_point_identifier)[0];\n  if (touch) {\n    var current = touchData[touchData.length - 1] || {\n      x: touch.clientX - offsetX,\n      y: touch.clientY - offsetY,\n      force: touch.force || 0, // Get force (if available, otherwise default to 0)\n      time_stamp: new Date().getTime(),\n      angle: 0\n    };\n    var prev = touchData[touchData.length - 2] || current;\n    var x1 = prev.x;\n    var y1 = prev.y;\n    var x2 = current.x;\n    var y2 = current.y;\n    var angleRadians;\n    if (x2 - x1 === 0) {\n      // Handle vertical line (x-coordinates are the same)\n      if (y2 > y1) {\n        angleRadians = Math.PI / 2; // 90 degrees or π/2 radians\n      } else if (y2 < y1) {\n        angleRadians = -Math.PI / 2;\n        //angleRadians = Math.PI*(3/2);\n        // -90 degrees or -π/2 radians\n      } else {\n        angleRadians = 0; // Points are the same (angle is 0 radians)\n      }\n    } else {\n      // Non-vertical line\n      angleRadians = Math.atan2(y2 - y1, x2 - x1);\n    }\n\n    touchData.push({\n      x: touch.clientX - offsetX,\n      y: touch.clientY - offsetY,\n      force: touch.force || 0, // Get force (if available, otherwise default to 0)\n      time_stamp: new Date().getTime(),\n      angle: angleRadians\n    });\n\n    var speed = Math.sqrt(Math.pow(current.x - prev.x, 2) + Math.pow(current.y - prev.y, 2)) / (current.time_stamp - prev.time_stamp);\n    var radius = Math.min(Math.max(pen_width_base * Math.pow(current.force, 0.4) * (force_weight / (force_weight + speed_weight)) * 0.5 + pen_width_base * Math.max(0.3, Math.log(speed) / Math.log(1.8)) * (speed_weight / (force_weight + speed_weight)) * 0.5, 0), pen_width_base * 0.7) || 0;\n    var c1 = getCoordinateOnCircleBorder(touch.clientX - offsetX, touch.clientY - offsetY, radius, angleRadians - Math.PI / 2);\n    var c2 = getCoordinateOnCircleBorder(touch.clientX - offsetX, touch.clientY - offsetY, radius, angleRadians + Math.PI / 2);\n\n    touchData_a.push({\n      x: c1.x,\n      y: c1.y\n    });\n    touchData_b.push({\n      x: c2.x,\n      y: c2.y\n    });\n    if (touchData.length >= 2) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      drawPath(ctx, segmentsToPath(touchData, scale), pen_color);\n      drawPath(ctx, segmentsToPath(simplifyPath(touchData_a, tole), scale), pen_color);\n      drawPath(ctx, segmentsToPath(simplifyPath(touchData_b, tole), scale), pen_color);\n    }\n    updatePenPath();\n  }\n}\n\nexport function handleTouchEnd_pen(event) {\n  var touches = [];\n  for (var t in event.changedTouches) {\n    if (event.changedTouches.hasOwnProperty(t) && typeof event.changedTouches[t] === 'object') {\n      touches.push(event.changedTouches[t]);\n    }\n  }\n\n  var touch = touches.filter((p) => p.identifier === touch_point_identifier)[0];\n  if (touch) {\n    if (touchData.length >= 2) {\n      var prev = touchData[touchData.length - 1];\n      touchData.push({\n        x: touch.clientX - offsetX,\n        y: touch.clientY - offsetY,\n        force: touch.force || 0, // Get force (if available, otherwise default to 0)\n        time_stamp: new Date().getTime(),\n        angle: touchData[touchData.length - 1].angle\n      });\n\n      touchData_a.push({\n        x: touch.clientX - offsetX,\n        y: touch.clientY - offsetY\n      });\n      touchData_b.push({\n        x: touch.clientX - offsetX,\n        y: touch.clientY - offsetY\n      });\n\n      touchData = touchData.map((g) => Object.assign(g, { x: g.x - move_offset_x, y: g.y - move_offset_y }));\n      touchData_a = touchData_a.map((g) => Object.assign(g, { x: g.x - move_offset_x, y: g.y - move_offset_y }));\n      touchData_b = touchData_b.map((g) => Object.assign(g, { x: g.x - move_offset_x, y: g.y - move_offset_y }));\n\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      drawPath(ctx, segmentsToPath(touchData, scale), pen_color);\n      drawPath(ctx, segmentsToPath(simplifyPath(touchData_a, tole), scale), pen_color);\n      drawPath(ctx, segmentsToPath(simplifyPath(touchData_b, tole), scale), pen_color);\n\n      updatePenPath();\n      var group = newGroupOnSVG();\n\n      drawPathOnSVG(currentPath.a, pen_color, group);\n      drawPathOnSVG(currentPath.b, pen_color, group);\n      drawPathOnSVG(currentPath.c, pen_color, group);\n\n      var ca = pathCommandToCoordinates(currentPath.a, 3);\n      var cb = pathCommandToCoordinates(currentPath.b, 3);\n      var cc = pathCommandToCoordinates(currentPath.c, 3);\n\n      registerElement(ca.concat(cb).concat(cc), group);\n      log_changes([group], []);\n    } else {\n      var point = touchData[touchData.length - 1];\n      var group = newGroupOnSVG();\n      drawCircleOnSVG(point.x, point.y, pen_width_base * 0.5, pen_color, group);\n      registerElement([point], group);\n      log_changes([group], []);\n    }\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  }\n}\n","export var supportsPassive = false;\nexport var wheelOpt = supportsPassive ? { passive: false } : false;\nexport var wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel';\n\nexport function preventDefault(e) {\n  e.preventDefault();\n}\n\nexport function preventDefaultForScrollKeys(e) {\n  var scroll_prevention_keys = { 37: 1, 38: 1, 39: 1, 40: 1 };\n  if (scroll_prevention_keys[e.keyCode]) {\n    preventDefault(e);\n    return false;\n  }\n}\n\nexport function checkPassive() {\n  try {\n    window.addEventListener(\n      'test',\n      null,\n      Object.defineProperty({}, 'passive', {\n        get: function () {\n          supportsPassive = true;\n        }\n      })\n    );\n  } catch (e) {}\n  wheelOpt = supportsPassive ? { passive: false } : false;\n}\n\nexport function disableScroll() {\n  window.addEventListener('DOMMouseScroll', preventDefault, false); // older FF\n  window.addEventListener(wheelEvent, preventDefault, wheelOpt); // modern desktop\n  window.addEventListener('touchmove', preventDefault, wheelOpt); // mobile\n  window.addEventListener('keydown', preventDefaultForScrollKeys, false);\n}\n\nexport function enableScroll() {\n  window.removeEventListener('DOMMouseScroll', preventDefault, false);\n  window.removeEventListener(wheelEvent, preventDefault, wheelOpt);\n  window.removeEventListener('touchmove', preventDefault, wheelOpt);\n  window.removeEventListener('keydown', preventDefaultForScrollKeys, false);\n}\n","import { mode, mover, setToolMode } from './tools/index.ts';\nimport { handleTouchStart_eraser, handleTouchMove_eraser, handleTouchEnd_eraser } from './tools/eraser.ts';\nimport { handleTouchStart_pen, handleTouchMove_pen, handleTouchEnd_pen } from './tools/pen.ts';\nimport { handleTouchStart_mover, handleTouchMove_mover, handleTouchEnd_mover } from './tools/mover.ts';\nimport { supportsPassive, wheelOpt, wheelEvent, checkPassive, disableScroll, enableScroll } from './scroll/index.ts';\nimport { setFabricColor, deleteFabricColor, initializeFabricColors, listFabricColors, setPenColor, updateFabricColorStyleTag, colorToHex, colorToCSS } from './tools/color.ts';\nimport { openColorPlate, closeColorPlate } from './tools/color-plate.ts';\nimport { resizeFabric, loadContent } from './fabric/index.ts';\nimport { saveContent, replayHistory } from './fabric/history.ts';\n\nimport './fabric/index.css';\n\nvar ripple = require('@erichsia7/ripple');\nexport var localforage = require('localforage');\nexport var { v4: uuidv4 } = require('uuid');\n\n//for development\n\nconst ErrorStackParser = require('error-stack-parser');\nconst StackTrace = require('stacktrace-js');\n\nwindow.onerror = async function (message, source, lineno, colno, error) {\n  StackTrace.fromError(error).then(function (stackTrace) {\n    var parsedStackTrace = stackTrace.map(function (frame) {\n      return {\n        functionName: frame.functionName,\n        fileName: frame.fileName,\n        lineNumber: frame.lineNumber,\n        columnNumber: frame.columnNumber\n      };\n    });\n    console.log('%c ----------', 'color: #888;');\n    parsedStackTrace.forEach((e) => {\n      console.error(`func: ${e.functionName}\\npath: ${e.fileName}\\nlocation: L${e.lineNumber} C${e.columnNumber}`);\n    });\n  });\n};\n\nwindow.fabric_initialize = function () {\n  canvas.addEventListener(\n    'touchstart',\n    function (event) {\n      if (0 <= mode <= 2) {\n        disableScroll();\n        if (mode === 0) {\n          handleTouchStart_pen(event);\n        }\n        if (mode === 1) {\n          handleTouchStart_eraser(event);\n        }\n        if (mode === 2) {\n          mover = true;\n          handleTouchStart_mover(event);\n        }\n      }\n    },\n    false\n  );\n\n  canvas.addEventListener(\n    'touchmove',\n    function (event) {\n      if (mode === 0) {\n        handleTouchMove_pen(event);\n      }\n      if (mode === 1) {\n        handleTouchMove_eraser(event);\n      }\n      if (mode === 2 && mover) {\n        handleTouchMove_mover(event);\n      }\n    },\n    false\n  );\n\n  canvas.addEventListener(\n    'touchend',\n    function (event) {\n      if (0 <= mode <= 2) {\n        enableScroll();\n        if (mode === 0) {\n          handleTouchEnd_pen(event);\n        }\n        if (mode === 1) {\n          handleTouchEnd_eraser(event);\n        }\n        if (mode === 2 && mover) {\n          handleTouchEnd_mover(event);\n          mover = false;\n        }\n      }\n      saveContent();\n    },\n    false\n  );\n\n  window.addEventListener('resize', function () {\n    resizeFabric();\n  });\n\n  ripple.addTo('.tools_container button', '#000', 370);\n\n  document.querySelectorAll('.tools_container button[group=\"1\"]').forEach((button) => {\n    button.addEventListener('click', function () {\n      var selectedMode = parseInt(button.getAttribute('m'));\n      setToolMode(selectedMode);\n    });\n  });\n  document.querySelectorAll('.tools_container button[group=\"0\"]').forEach((button) => {\n    button.addEventListener('click', function () {\n      var selectedMode = String(button.getAttribute('m'));\n      replayHistory(selectedMode);\n    });\n  });\n\n  document.addEventListener(\n    'dblclick',\n    function (event) {\n      event.preventDefault();\n    },\n    false\n  );\n  resizeFabric();\n  loadContent();\n  checkPassive();\n  /*\n\n  document.querySelector('.tools_container button[group=\"2\"]').addEventListener('click', function () {\n    openColorPlate();\n  });\n\n  document.querySelector('.fabric_color_plate_close button').addEventListener('click', function () {\n    closeColorPlate();\n  });\n  */\n};\n\nexport default window.fabric_initialize;\n","import { log_changes } from '../fabric/history.ts';\nimport { canvas, ctx, scale, registration } from '../fabric/index.ts';\nimport { mode, mover, move_start_x, move_start_y, move_end_x, move_end_y, move_offset_x, move_offset_y, offsetX, offsetY, touchData, touchData_a, touchData_b, start_timestamp, touch_point_identifier, pen_width_base, force_weight, speed_weight, pen_color, tole, currentPath, eraser_selected_element, eraser_hidden_element, eraser_d, eraser_color, setToolMode } from './index.ts';\n\nexport function handleTouchStart_eraser(event) {\n  eraser_selected_element = {};\n}\n\nexport function handleTouchMove_eraser(event) {\n  var touch = event.touches[0];\n  var current = {\n    x: touch.clientX - offsetX - move_offset_x,\n    y: touch.clientY - offsetY - move_offset_y\n  };\n\n  function searchGroup(x, y) {\n    var filterd_a = [];\n    var result = {};\n    for (var r in registration) {\n      var g = registration[r];\n      if (!g) {\n        continue;\n      }\n      if (g.hidden === true) {\n        continue;\n      }\n      if (g.x1 - 5 - eraser_d <= x && x <= g.x2 + 5 + eraser_d && g.y1 - 5 - eraser_d <= y && y <= g.y2 + 5 + eraser_d) {\n        filterd_a.push(g);\n      }\n    }\n    var filterd_a_len = filterd_a.length;\n    for (var i = 0; i < filterd_a_len; i++) {\n      var w = filterd_a[i];\n      var z = w.points.sort(function (a, b) {\n        return Math.sqrt(Math.pow(a.x - x, 2) + Math.pow(a.y - y, 2)) - Math.sqrt(Math.pow(b.x - x, 2) + Math.pow(b.y - y, 2));\n      });\n      if (Math.sqrt(Math.pow(z[0].x - x, 2) + Math.pow(z[0].y - y, 2)) < 10 + eraser_d) {\n        result[w.id] = true;\n        continue;\n      }\n    }\n    return result;\n  }\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  ctx.lineWidth = 1.2 * scale;\n  ctx.strokeStyle = eraser_color;\n\n  ctx.beginPath();\n  ctx.arc((current.x + offsetX + move_offset_x) * scale, (current.y + offsetY + move_offset_y) * scale, (eraser_d + 5) * scale, 0, 2 * Math.PI);\n  ctx.stroke();\n\n  eraser_selected_element = Object.assign(eraser_selected_element, searchGroup(current.x, current.y));\n  for (var k in eraser_selected_element) {\n    document.querySelector('svg#vector_fabric g#' + k).setAttributeNS(null, 'opacity', '0.25');\n  }\n}\n\nexport function handleTouchEnd_eraser(event) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  var hidden_element_identifier = [];\n  for (var k in eraser_selected_element) {\n    var target = document.querySelector('svg#vector_fabric g#' + k);\n\n    document.querySelector('svg#vector_fabric g#hidden_pen').appendChild(target);\n    target.removeAttributeNS(null, 'opacity');\n    //target.remove()\n    registration[k].hidden = true;\n    hidden_element_identifier.push(k);\n  }\n  log_changes([], hidden_element_identifier);\n}\n","import { eraser_selected_element, eraser_hidden_element, eraser_d, move_start_x, move_start_y, move_end_x, move_end_y, move_offset_x, move_offset_y, offsetX, offsetY } from './index.ts';\nimport { svg_canvas_pen_layer } from '../fabric/index.ts';\nexport function handleTouchStart_mover(event) {\n  var touch = event.touches[0];\n  var current = {\n    x: touch.clientX - offsetX,\n    y: touch.clientY - offsetY\n  };\n  move_start_x = current.x;\n  move_start_y = current.y;\n}\n\nexport function handleTouchMove_mover(event) {\n  var touch = event.touches[0];\n  var current = {\n    x: touch.clientX - offsetX,\n    y: touch.clientY - offsetY\n  };\n  move_end_x = current.x;\n  move_end_y = current.y;\n  svg_canvas_pen_layer.setAttribute('transform', `translate(${move_offset_x + move_end_x - move_start_x} ${move_offset_y + move_end_y - move_start_y})`);\n}\n\nexport function handleTouchEnd_mover(event) {\n  move_offset_x += move_end_x - move_start_x;\n  move_offset_y += move_end_y - move_start_y;\n  svg_canvas_pen_layer.setAttribute('transform', `translate(${move_offset_x} ${move_offset_y})`);\n}\n"],"names":["mode","mover","move_start_x","move_start_y","move_end_x","move_end_y","move_offset_x","move_offset_y","touchData","touchData_a","touchData_b","touch_point_identifier","pen_width_base","force_weight","speed_weight","pen_color","tole","Math","min","log","pow","currentPath","a","b","c","eraser_selected_element","eraser_d","segmentsToPath","segments","scale","length","pathCommand","concat","x","y","i","n","distanceToSegment","point","start","end","dx","dy","d","t","closestPoint","sqrt","simplifyPath","points","tolerance","dmax","index","leftPoints","slice","rightPoints","simplifiedLeft","simplifiedRight","pathCommandToCoordinates","str","precision","regex","m","exec","lastIndex","forEach","match","groupIndex","parseFloat","push","pX","p","pY","distance","h","abs","x1","y1","x2","y2","max","canvas","document","querySelector","ctx","getContext","svg_canvas","svg_canvas_pen_layer","window","devicePixelRatio","width","innerWidth","height","innerHeight","registration","resizeFabric","setAttributeNS","style","background","updatePenPath","registerElement","coordinates","id","map","e","apply","_toConsumableArray","hidden","change_history","history_offset","log_changes","addition","deletion","replayHistory","prev","prev_addition","prev_deletion","prev_addition_len","prev_deletion_len","hidden_element_identifier","displayed_element_identifier","k","target","appendChild","removeAttributeNS","splice","localforage","setItem","String","innerHTML","then","err","getCoordinateOnCircleBorder","centerX","centerY","radius","radian","cos","toFixed","sin","degree","PI","newGroupOnSVG","createElementNS","uuidv4","drawPathOnSVG","pathData","color","container","drawPath","path","Path2D","lineCap","lineWidth","strokeStyle","stroke","closePath","handleTouchEnd_pen","event","touches","changedTouches","hasOwnProperty","_typeof","r","touch","filter","identifier","clientX","clientY","force","time_stamp","Date","getTime","angle","g","Object","assign","clearRect","group","ca","cb","cc","supportsPassive","wheelOpt","passive","wheelEvent","createElement","preventDefault","preventDefaultForScrollKeys","keyCode","_regeneratorRuntime","prototype","o","defineProperty","value","Symbol","iterator","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","l","f","s","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","v","values","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","ripple","require","v4","StackTrace","onerror","fn","_ref","_callee","message","source","lineno","colno","_context","fromError","stackTrace","parsedStackTrace","frame","functionName","fileName","lineNumber","columnNumber","console","self","args","arguments","undefined","_x","_x2","_x3","_x4","_x5","fabric_initialize","addEventListener","current","beginPath","arc","fillStyle","fill","handleTouchStart_pen","handleTouchStart_mover","angleRadians","atan2","speed","c1","c2","handleTouchMove_pen","filterd_a","result","filterd_a_len","w","z","sort","searchGroup","handleTouchMove_eraser","setAttribute","handleTouchMove_mover","removeEventListener","handleTouchEnd_eraser","saveContent","addTo","querySelectorAll","button","getSelector","classList","remove","add","setToolMode","parseInt","getAttribute","getItem","elements","elements_length","_step","_iterator","_createForOfIteratorHelper","children","child","tagName","toLowerCase","get","checkPassive"],"sourceRoot":""}