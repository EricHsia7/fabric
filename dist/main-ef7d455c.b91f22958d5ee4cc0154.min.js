/*! For license information please see main-ef7d455c.b91f22958d5ee4cc0154.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("fabric",[],e):"object"==typeof exports?exports.fabric=e():t.fabric=e()}(self,(()=>(()=>{"use strict";var t,e={512:(t,e,r)=>{r.d(e,{CI:()=>u,Vn:()=>l,y5:()=>f});var n=!1,o=!!n&&{passive:!1},c="onwheel"in document.createElement("div")?"wheel":"mousewheel";function a(t){t.preventDefault()}function i(t){if({37:1,38:1,39:1,40:1}[t.keyCode])return a(t),!1}function u(){try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){n=!0}}))}catch(t){}o=!!n&&{passive:!1}}function f(){window.addEventListener("DOMMouseScroll",a,!1),window.addEventListener(c,a,o),window.addEventListener("touchmove",a,o),window.addEventListener("keydown",i,!1)}function l(){window.removeEventListener("DOMMouseScroll",a,!1),window.removeEventListener(c,a,o),window.removeEventListener("touchmove",a,o),window.removeEventListener("keydown",i,!1)}},890:(t,e,r)=>{r.d(e,{Y:()=>s,c:()=>h});var n=r(635),o=r(356);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",f=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var c=e&&e.prototype instanceof _?e:_,a=Object.create(c.prototype),i=new Y(n||[]);return o(a,"_invoke",{value:O(t,r,i)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var g="suspendedStart",y="suspendedYield",d="executing",v="completed",m={};function _(){}function b(){}function x(){}var w={};s(w,u,(function(){return this}));var L=Object.getPrototypeOf,j=L&&L(L(T([])));j&&j!==r&&n.call(j,u)&&(w=j);var k=x.prototype=_.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,a,i,u){var f=p(t[o],t,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==c(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,u)}))}u(f.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=g;return function(c,a){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===c)throw a;return{value:t,done:!0}}for(n.method=c,n.arg=a;;){var i=n.delegate;if(i){var u=D(i,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===g)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var f=p(e,r,n);if("normal"===f.type){if(o=n.done?v:y,f.arg===m)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=v,n.method="throw",n.arg=f.arg)}}}function D(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,D(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var c=p(o,e.iterator,r.arg);if("throw"===c.type)return r.method="throw",r.arg=c.arg,r.delegate=null,m;var a=c.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(c(e)+" is not iterable")}return b.prototype=x,o(k,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=s(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},S(E.prototype),s(E.prototype,f,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,c){void 0===c&&(c=Promise);var a=new E(h(t,r,n,o),c);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(k),s(k,l,"Generator"),s(k,u,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,Y.prototype={constructor:Y,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var a=this.tryEntries[c],i=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),f=n.call(a,"finallyLoc");if(u&&f){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var c=o;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=e&&e<=c.finallyLoc&&(c=null);var a=c?c.completion:{};return a.type=t,a.arg=e,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function i(t,e,r,n,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function u(t,e,r,n,o,c,a,i,u){if(0===n)var f=0,l=.66,s="normal";if(1===n)f=1,l=1,s="reverse";return".tools_container .".concat(o," button").concat(u?":nth-child(".concat(a-t+1+i,")"):"","{transform:scale(").concat(l,");opacity:").concat(f,";animation-duration: ").concat(e,"ms;animation-name: scale;animation-timing-function: ease-out;animation-fill-mode: forwards;animation-delay: ").concat(c+(t-1)*r,"ms;animation-direction: ").concat(s,";}")}function f(t,e){if(1===t)var r=0,n=.66;if(0===t)r=1,n=1;return".tools_container .".concat(e," button {transform:scale(").concat(n,");opacity: ").concat(r,";}")}function l(){var t;return t=a().mark((function t(){var e,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,n.iA)();case 3:return e=t.sent,r=[],e.forEach((function(t){var e,c;r.push((e=t,c=(0,n.si)(e),'<button id="pl-'.concat((0,o.gZ)(),'" color-id="').concat(e.id,'" onclick="setPenColor(\'').concat(e.id,'\')"><div class="fabric_color"><div class="fabric_color_c" style="--fc-light-color:').concat(c.light.hex,";--fc-dark-color:").concat(c.dark.hex,'"></div></div></button>')))})),document.querySelector(".fabric_color_plate").innerHTML=r.join(""),t.abrupt("return","");case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})),l=function(){var e=this,r=arguments;return new Promise((function(n,o){var c=t.apply(e,r);function a(t){i(c,n,o,a,u,"next",t)}function u(t){i(c,n,o,a,u,"throw",t)}a(void 0)}))},l.apply(this,arguments)}function s(){(function(){return l.apply(this,arguments)})().then((function(){document.querySelector(".fabric_color_plate").style.display="block",document.querySelector(".fabric_color_plate_close").style.display="grid";for(var t=180,e=Math.floor(document.querySelector(".fabric_color_plate").scrollLeft/50)||0,r=[],n=6;n>0;n--)r.push(u(n,t,45,1,"tools_button",0,6,0,!0)),r.push(u(n,t,45,0,"fabric_color_plate",225,6,e,!0));r.push(u(6,t,45,0,"fabric_color_plate_close",0,6,0,!1)),document.querySelector("#fabric-color-plate-animation").innerHTML=r.join(""),document.querySelectorAll(".fabric_color_plate button")[e].addEventListener("animationend",(function(){document.querySelector("#fabric-color-plate-animation").innerHTML=f(1,"tools_button")+f(0,"fabric_color_plate")}),{once:!0})}))}function h(){for(var t=180,e=Math.floor(document.querySelector(".fabric_color_plate").scrollLeft/50)||0,r=[],n=6;n>0;n--)r.push(u(n,t,45,0,"tools_button",225,6,0,!0)),r.push(u(n,t,45,1,"fabric_color_plate",0,6,e,!0));r.push(u(1,t,45,1,"fabric_color_plate_close",0,1,0,!1)),document.querySelector("#fabric-color-plate-animation").innerHTML=r.join(""),document.querySelectorAll(".tools_button button")[0].addEventListener("animationend",(function(){document.querySelector(".fabric_color_plate").style.display="none",document.querySelector(".fabric_color_plate_close").style.display="none",document.querySelector("#fabric-color-plate-animation").innerHTML=""}),{once:!0})}},635:(t,e,r)=>{r.d(e,{Bz:()=>v,KK:()=>_,_N:()=>p,iA:()=>y,si:()=>m});var n=r(356),o=r(24);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(){u=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var c=e&&e.prototype instanceof _?e:_,a=Object.create(c.prototype),i=new Y(n||[]);return o(a,"_invoke",{value:O(t,r,i)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var g="suspendedStart",y="suspendedYield",d="executing",v="completed",m={};function _(){}function b(){}function x(){}var w={};s(w,i,(function(){return this}));var L=Object.getPrototypeOf,j=L&&L(L(T([])));j&&j!==r&&n.call(j,i)&&(w=j);var k=x.prototype=_.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,a,i,u){var f=p(t[o],t,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==c(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,u)}))}u(f.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=g;return function(c,a){if(o===d)throw new Error("Generator is already running");if(o===v){if("throw"===c)throw a;return{value:t,done:!0}}for(n.method=c,n.arg=a;;){var i=n.delegate;if(i){var u=D(i,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===g)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var f=p(e,r,n);if("normal"===f.type){if(o=n.done?v:y,f.arg===m)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=v,n.method="throw",n.arg=f.arg)}}}function D(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,D(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var c=p(o,e.iterator,r.arg);if("throw"===c.type)return r.method="throw",r.arg=c.arg,r.delegate=null,m;var a=c.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(c(e)+" is not iterable")}return b.prototype=x,o(k,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=s(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},S(E.prototype),s(E.prototype,f,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,c){void 0===c&&(c=Promise);var a=new E(h(t,r,n,o),c);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(k),s(k,l,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,Y.prototype={constructor:Y,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var a=this.tryEntries[c],i=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),f=n.call(a,"finallyLoc");if(u&&f){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var c=o;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=e&&e<=c.finallyLoc&&(c=null);var a=c?c.completion:{};return a.type=t,a.arg=e,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function f(t,e,r,n,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var c=t.apply(e,r);function a(t){f(c,n,o,a,i,"next",t)}function i(t){f(c,n,o,a,i,"throw",t)}a(void 0)}))}}function s(t,e,r,n,o,c,a,i){return h.apply(this,arguments)}function h(){return(h=l(u().mark((function t(e,r,o,c,a,i,f,l){var s,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=function(t){return Math.max(Math.min(255,Math.floor(t)),0)},"number"!=typeof e||"number"!=typeof r||"number"!=typeof o||"number"!=typeof c||"number"!=typeof a||"number"!=typeof i){t.next=14;break}return e=s(e),r=s(r),o=s(o),c=s(c),a=s(a),i=s(i),l=l||"fc-"+(0,n.gZ)(),f=f||(new Date).getTime(),h={id:l,light:{type:"rgb",r:e,g:r,b:o},dark:{type:"rgb",r:c,g:a,b:i},time:f,type:"FabricColor"},t.next=13,n.yd.setItem(l,JSON.stringify(h));case 13:return t.abrupt("return",h);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return g.apply(this,arguments)}function g(){return(g=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(17,17,17,255,255,255,-6,"fc-default-black-white");case 2:return t.next=4,s(255,54,54,255,79,79,-5,"fc-default-red");case 4:return t.next=6,s(255,212,18,255,220,64,-4,"fc-default-yellow");case 6:return t.next=8,s(24,163,105,47,189,130,-3,"fc-default-green");case 8:return t.next=10,s(26,139,237,42,150,245,-2,"fc-default-blue");case 10:return t.next=12,s(99,79,232,108,91,222,-1,"fc-default-purple");case 12:return t.abrupt("return","");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return d.apply(this,arguments)}function d(){return(d=l(u().mark((function t(){var e,r,c,i,f,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.yd.keys();case 3:e=t.sent,r=[],e=e.filter((function(t){return String(t).indexOf("fc-")>-1})),c=a(e),t.prev=7,c.s();case 9:if((i=c.n()).done){t.next=17;break}return f=i.value,t.next=13,n.yd.getItem(f);case 13:l=t.sent,r.push(JSON.parse(String(l)));case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),c.e(t.t0);case 22:return t.prev=22,c.f(),t.finish(22);case 25:return r.sort((function(t,e){return t.time-e.time})),o.gc.fabric_colors_cache=r,t.abrupt("return",r);case 30:return t.prev=30,t.t1=t.catch(0),console.log(t.t1),t.abrupt("return",[]);case 34:case"end":return t.stop()}}),t,null,[[0,30],[7,19,22,25]])})))).apply(this,arguments)}function v(){y().then((function(t){var e=[],r=[];t.filter((function(t){return!0})).forEach((function(t){var n=_(t).declaration;e.push(n.light),r.push(n.dark)})),document.querySelector("head style#fabric_color").innerHTML=":root {".concat(e.join(""),"}@media (prefers-color-scheme: dark) {:root{").concat(r.join(""),"}}")}))}function m(t){function e(t){var e=t.toString(16);return String(1==e.length?"0"+e:e).toUpperCase()}return{id:t.id,light:{type:"hex",hex:"#".concat(e(t.light.r)).concat(e(t.light.g)).concat(e(t.light.b))},dark:{type:"hex",hex:"#".concat(e(t.dark.r)).concat(e(t.dark.g)).concat(e(t.dark.b))}}}function _(t){var e=m(t);return{declaration:{light:"--".concat(t.id,": ").concat(e.light.hex,";"),dark:"--".concat(t.id,": ").concat(e.dark.hex,";")},application:"var(--".concat(t.id,")")}}},238:(t,e,r)=>{r.d(e,{$I:()=>a,G8:()=>u,Yz:()=>i});var n=r(396),o=r(936),c=r(24);function a(t){c.gc.eraser_selected_element={}}function i(t){var e=t.touches[0],r={x:e.clientX-c.gc.offsetX-c.gc.move_offset_x,y:e.clientY-c.gc.offsetY-c.gc.move_offset_y};for(var n in o.ej.clearRect(0,0,o.Ji.width,o.Ji.height),o.ej.lineWidth=1.2*o.hs,o.ej.strokeStyle=c.gc.eraser_color,o.ej.beginPath(),o.ej.arc((r.x+c.gc.offsetX+c.gc.move_offset_x)*o.hs,(r.y+c.gc.offsetY+c.gc.move_offset_y)*o.hs,(c.gc.eraser_d+5)*o.hs,0,2*Math.PI),o.ej.stroke(),c.gc.eraser_selected_element=Object.assign(c.gc.eraser_selected_element,function(t,e){var r=[],n={};for(var a in o.An){var i=o.An[a];i&&(!0!==i.hidden&&i.x1-5-c.gc.eraser_d<=t&&t<=i.x2+5+c.gc.eraser_d&&i.y1-5-c.gc.eraser_d<=e&&e<=i.y2+5+c.gc.eraser_d&&r.push(i))}for(var u=r.length,f=0;f<u;f++){var l=r[f],s=l.points.sort((function(r,n){return Math.sqrt(Math.pow(r.x-t,2)+Math.pow(r.y-e,2))-Math.sqrt(Math.pow(n.x-t,2)+Math.pow(n.y-e,2))}));Math.sqrt(Math.pow(s[0].x-t,2)+Math.pow(s[0].y-e,2))<10+c.gc.eraser_d&&(n[l.id]=!0)}return n}(r.x,r.y)),c.gc.eraser_selected_element)document.querySelector("svg#vector_fabric g#"+n).setAttributeNS(null,"opacity","0.25")}function u(t){o.ej.clearRect(0,0,o.Ji.width,o.Ji.height);var e=[];for(var r in c.gc.eraser_selected_element){var a=document.querySelector("svg#vector_fabric g#"+r);document.querySelector("svg#vector_fabric g#hidden_pen").appendChild(a),a.removeAttributeNS(null,"opacity"),o.An[r].hidden=!0,e.push(r)}(0,n.zY)([],e)}},24:(t,e,r)=>{r.d(e,{K3:()=>c,T3:()=>a,gc:()=>o,jx:()=>i});var n=r(635),o={mode:0,mover:!1,move_start_x:0,move_start_y:0,move_end_x:0,move_end_y:0,move_offset_x:0,move_offset_y:0,offsetX:0,offsetY:0,touchData_x:{main:[],a:[],b:[]},start_timestamp:0,touch_point_identifier:0,pen_width_base:4,force_weight:0,speed_weight:-.7,pen_color:"#000000",pen_color_id:"fc-default-black-white",tole:Math.min(Math.log(4)/Math.log(Math.pow(10,.88)),.7),currentPath:{a:"",b:"",c:""},eraser_selected_element:{},eraser_hidden_element:{},eraser_d:15,eraser_color:"#888888",fabric_colors_cache:[]};function c(t){function e(t){return document.querySelector('.tools_container button[m="'.concat(t,'"] span'))}o.mode=1*t;for(var r=0;r<3;r++)e(r).classList.remove("filled");e(t).classList.add("filled")}function a(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function i(t){var e=o.fabric_colors_cache.filter((function(e){return e.id===t}))[0];o.pen_color_id=e?e.id:"fc-default-black-white";var r=(0,n.si)(e),c=document.querySelector(".tools_container .tools_button button .fabric_color_c");c.style.setProperty("--fc-light-color",r.light.hex),c.style.setProperty("--fc-dark-color",r.dark.hex)}},601:(t,e,r)=>{r.d(e,{Ad:()=>c,RU:()=>a,v3:()=>i});var n=r(24),o=r(936);function c(t){var e=t.touches[0],r={x:e.clientX-n.gc.offsetX,y:e.clientY-n.gc.offsetY};n.gc.move_start_x=r.x,n.gc.move_start_y=r.y}function a(t){var e=t.touches[0],r={x:e.clientX-n.gc.offsetX,y:e.clientY-n.gc.offsetY};n.gc.move_end_x=r.x,n.gc.move_end_y=r.y,o.oz.setAttribute("transform","translate(".concat(n.gc.move_offset_x+n.gc.move_end_x-n.gc.move_start_x," ").concat(n.gc.move_offset_y+n.gc.move_end_y-n.gc.move_start_y,")"))}function i(t){n.gc.move_offset_x=n.gc.move_offset_x+n.gc.move_end_x-n.gc.move_start_x,n.gc.move_offset_y=n.gc.move_offset_y+n.gc.move_end_y-n.gc.move_start_y,o.oz.setAttribute("transform","translate(".concat(n.gc.move_offset_x," ").concat(n.gc.move_offset_y,")"))}},903:(t,e,r)=>{r.d(e,{Uy:()=>h,X:()=>g,Zf:()=>p});var n=r(377),o=r(108),c=r(409),a=r(396),i=r(936),u=r(24),f=r(822),l=r(635);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function h(t){var e=u.gc.fabric_colors_cache.filter((function(t){return t.id===u.gc.pen_color_id}))[0];u.gc.pen_color=(0,l.si)(e)[(0,u.T3)()].hex;var r=t.touches[0];u.gc.touchData_x.main=[],u.gc.touchData_x.a=[],u.gc.touchData_x.b=[],u.gc.touch_point_identifier=1*r.identifier,r.force?(u.gc.force_weight=.5,u.gc.speed_weight=-.2):(u.gc.force_weight=.1,u.gc.speed_weight=.2),u.gc.touchData_x.main.push({x:r.clientX-u.gc.offsetX,y:r.clientY-u.gc.offsetY,force:r.force||0,time_stamp:(new Date).getTime(),angle:0}),u.gc.touchData_x.a.push({x:r.clientX-u.gc.offsetX,y:r.clientY-u.gc.offsetY}),u.gc.touchData_x.b.push({x:r.clientX-u.gc.offsetX,y:r.clientY-u.gc.offsetY});var n=u.gc.touchData_x.main[u.gc.touchData_x.main.length-1];i.ej.beginPath(),i.ej.arc(n.x*i.hs,n.y*i.hs,.5*u.gc.pen_width_base*i.hs,0,2*Math.PI),i.ej.fillStyle=u.gc.pen_color,i.ej.fill(),i.ej.closePath()}function p(t){var e=[];for(var r in t.touches)t.touches.hasOwnProperty(r)&&"object"===s(t.touches[r])&&e.push(t.touches[r]);var c=e.filter((function(t){return t.identifier===u.gc.touch_point_identifier}))[0];if(c){var a,l=u.gc.touchData_x.main[u.gc.touchData_x.main.length-1]||{x:c.clientX-u.gc.offsetX,y:c.clientY-u.gc.offsetY,force:c.force||0,time_stamp:(new Date).getTime(),angle:0},h=u.gc.touchData_x.main[u.gc.touchData_x.main.length-2]||l,p=h.x,g=h.y,y=l.x,d=l.y;a=y-p==0?d>g?Math.PI/2:d<g?-Math.PI/2:0:Math.atan2(d-g,y-p),u.gc.touchData_x.main.push({x:c.clientX-u.gc.offsetX,y:c.clientY-u.gc.offsetY,force:c.force||0,time_stamp:(new Date).getTime(),angle:a});var v=Math.sqrt(Math.pow(l.x-h.x,2)+Math.pow(l.y-h.y,2))/(l.time_stamp-h.time_stamp),m=Math.min(Math.max(u.gc.pen_width_base*Math.pow(l.force,.4)*(u.gc.force_weight/(u.gc.force_weight+u.gc.speed_weight))*.5+u.gc.pen_width_base*Math.max(.3,Math.log(v)/Math.log(1.8))*(u.gc.speed_weight/(u.gc.force_weight+u.gc.speed_weight))*.5,0),.7*u.gc.pen_width_base)||0,_=(0,n.A)(c.clientX-u.gc.offsetX,c.clientY-u.gc.offsetY,m,a-Math.PI/2),b=(0,n.A)(c.clientX-u.gc.offsetX,c.clientY-u.gc.offsetY,m,a+Math.PI/2);u.gc.touchData_x.a.push({x:_.x,y:_.y}),u.gc.touchData_x.b.push({x:b.x,y:b.y}),u.gc.touchData_x.main.length>=2&&(i.ej.clearRect(0,0,i.Ji.width,i.Ji.height),(0,f.k)(i.ej,(0,o.pQ)(u.gc.touchData_x.main,i.hs),u.gc.pen_color),(0,f.k)(i.ej,(0,o.pQ)((0,o.zl)(u.gc.touchData_x.a,u.gc.tole),i.hs),u.gc.pen_color),(0,f.k)(i.ej,(0,o.pQ)((0,o.zl)(u.gc.touchData_x.b,u.gc.tole),i.hs),u.gc.pen_color)),(0,i._w)()}}function g(t){var e=u.gc.fabric_colors_cache.filter((function(t){return t.id===u.gc.pen_color_id}))[0],r=[];for(var n in t.changedTouches)t.changedTouches.hasOwnProperty(n)&&"object"===s(t.changedTouches[n])&&r.push(t.changedTouches[n]);var h=r.filter((function(t){return t.identifier===u.gc.touch_point_identifier}))[0];if(h){if(u.gc.touchData_x.main.length>=2){u.gc.touchData_x.main[u.gc.touchData_x.main.length-1];u.gc.touchData_x.main.push({x:h.clientX-u.gc.offsetX,y:h.clientY-u.gc.offsetY,force:h.force||0,time_stamp:(new Date).getTime(),angle:u.gc.touchData_x.main[u.gc.touchData_x.main.length-1].angle}),u.gc.touchData_x.a.push({x:h.clientX-u.gc.offsetX,y:h.clientY-u.gc.offsetY}),u.gc.touchData_x.b.push({x:h.clientX-u.gc.offsetX,y:h.clientY-u.gc.offsetY}),u.gc.touchData_x.main=u.gc.touchData_x.main.map((function(t){return Object.assign(t,{x:t.x-u.gc.move_offset_x,y:t.y-u.gc.move_offset_y})})),u.gc.touchData_x.a=u.gc.touchData_x.a.map((function(t){return Object.assign(t,{x:t.x-u.gc.move_offset_x,y:t.y-u.gc.move_offset_y})})),u.gc.touchData_x.b=u.gc.touchData_x.b.map((function(t){return Object.assign(t,{x:t.x-u.gc.move_offset_x,y:t.y-u.gc.move_offset_y})})),i.ej.clearRect(0,0,i.Ji.width,i.Ji.height),(0,f.k)(i.ej,(0,o.pQ)(u.gc.touchData_x.main,i.hs),u.gc.pen_color),(0,f.k)(i.ej,(0,o.pQ)((0,o.zl)(u.gc.touchData_x.a,u.gc.tole),i.hs),u.gc.pen_color),(0,f.k)(i.ej,(0,o.pQ)((0,o.zl)(u.gc.touchData_x.b,u.gc.tole),i.hs),u.gc.pen_color),(0,i._w)();var p=(0,i.x3)()+1,g=(0,c.Xf)(p),y=(0,l.KK)(e).application;(0,c.Vs)(u.gc.currentPath.a,y,g),(0,c.Vs)(u.gc.currentPath.b,y,g),(0,c.Vs)(u.gc.currentPath.c,y,g);var d=(0,o.vp)(u.gc.currentPath.a,3),v=(0,o.vp)(u.gc.currentPath.b,3),m=(0,o.vp)(u.gc.currentPath.c,3);(0,i.kT)(d.concat(v).concat(m),g,p),(0,a.zY)([g],[])}else{p=(0,i.x3)()+1;var _=u.gc.touchData_x.main[u.gc.touchData_x.main.length-1];g=(0,c.Xf)(p),y=(0,l.KK)(e).application;(0,c.MH)(_.x,_.y,.5*u.gc.pen_width_base,y,g),(0,i.kT)([_],g,p),(0,a.zY)([g],[])}i.ej.clearRect(0,0,i.Ji.width,i.Ji.height)}}}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var c=r[t]={exports:{}};return e[t].call(c.exports,c,c.exports,n),c.exports}n.m=e,t=[],n.O=(e,r,o,c)=>{if(!r){var a=1/0;for(l=0;l<t.length;l++){for(var[r,o,c]=t[l],i=!0,u=0;u<r.length;u++)(!1&c||a>=c)&&Object.keys(n.O).every((t=>n.O[t](r[u])))?r.splice(u--,1):(i=!1,c<a&&(a=c));if(i){t.splice(l--,1);var f=o();void 0!==f&&(e=f)}}return e}c=c||0;for(var l=t.length;l>0&&t[l-1][2]>c;l--)t[l]=t[l-1];t[l]=[r,o,c]},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={556:0,18:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var o,c,[a,i,u]=r,f=0;if(a.some((e=>0!==t[e]))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(u)var l=u(n)}for(e&&e(r);f<a.length;f++)c=a[f],n.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return n.O(l)},r=self.webpackChunkfabric=self.webpackChunkfabric||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var o=n.O(void 0,[281,790,611,606,65,139,831,462,18,509],(()=>n(356)));return o=(o=n.O(o)).default})()));
//# sourceMappingURL=main-ef7d455c.b91f22958d5ee4cc0154.min.js.map